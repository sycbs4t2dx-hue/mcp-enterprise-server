# MCP统一配置文件
# 所有配置项集中管理，支持环境变量覆盖

# 数据库配置
database:
  url: mysql+pymysql://root:password@localhost:3306/mcp_db
  pool_size: 20
  max_overflow: 10
  pool_timeout: 30
  pool_recycle: 3600
  echo: false

# Redis配置
redis:
  host: localhost
  port: 6379
  db: 0
  password: null
  timeout: 5
  max_connections: 50

# Milvus向量数据库配置
milvus:
  host: localhost
  port: 19530
  timeout: 30
  index_type: HNSW
  metric_type: COSINE

# 缓存配置
cache:
  l1_capacity: 2000
  l1_ttl: 60
  l2_ttl: 300
  enabled: true

# WebSocket配置
websocket:
  host: 0.0.0.0
  port: 8765
  max_connections: 1000
  heartbeat_interval: 30

# API配置
api:
  rate_limit: 100
  rate_limit_window: 60
  cors_enabled: true
  api_keys: []
  allowed_ips: []

# 日志配置
logging:
  level: INFO
  format: "%(asctime)s [%(levelname)s] %(name)s: %(message)s"
  file: logs/mcp.log
  max_bytes: 10485760  # 10MB
  backup_count: 5

# 性能配置
performance:
  enable_profiling: false
  enable_metrics: true
  metrics_port: 9090

# 嵌入服务配置
embedding:
  model_name: text-embedding-ada-002
  max_tokens: 8191
  batch_size: 100

# 错误防火墙配置
error_firewall:
  enabled: true
  similarity_threshold: 0.85
  max_history: 1000

# 项目管理配置
project:
  max_sessions_per_project: 10
  session_timeout: 3600
  auto_save_interval: 300

# 环境变量覆盖映射
# 以下环境变量会自动覆盖对应配置：
# DATABASE_URL -> database.url
# DB_PASSWORD -> 替换database.url中的密码
# REDIS_HOST -> redis.host
# REDIS_PORT -> redis.port
# REDIS_PASSWORD -> redis.password
# MILVUS_HOST -> milvus.host
# MILVUS_PORT -> milvus.port
# API_KEYS -> api.api_keys (逗号分隔)
# LOG_LEVEL -> logging.level
# CONFIG_HOT_RELOAD -> 启用热重载（true/false）