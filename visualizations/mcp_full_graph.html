<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCPÈ°πÁõÆÁü•ËØÜÂõæË∞± - ÂÆåÊï¥Áâà</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
        }
        .container { display: flex; height: 100vh; }
        .sidebar {
            width: 320px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        .sidebar h1 {
            color: #764ba2;
            font-size: 22px;
            margin-bottom: 20px;
        }
        .stats {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        .stat-item:last-child { border-bottom: none; }
        .controls { margin-bottom: 20px; }
        .control-group { margin-bottom: 15px; }
        .control-group label {
            display: block;
            margin-bottom: 5px;
            color: #666;
            font-size: 14px;
        }
        .control-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        button:hover { transform: scale(1.02); }
        #graph { flex: 1; position: relative; }
        .tooltip {
            position: absolute;
            padding: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 5px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }
        .node { cursor: pointer; }
        .link { fill: none; stroke: #999; stroke-opacity: 0.6; }
        .node-label {
            font-size: 10px;
            pointer-events: none;
            text-anchor: middle;
        }
        .legend {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h1>üìä MCPÈ°πÁõÆÁü•ËØÜÂõæË∞±</h1>

            <div class="stats">
                <div class="stat-item">
                    <span>Êñá‰ª∂ÊÄªÊï∞</span>
                    <strong>123</strong>
                </div>
                <div class="stat-item">
                    <span>‰æùËµñÂÖ≥Á≥ª</span>
                    <strong>10</strong>
                </div>
                <div class="stat-item">
                    <span>PythonÊñá‰ª∂</span>
                    <strong>105</strong>
                </div>
                <div class="stat-item">
                    <span>È°πÁõÆÂ§ßÂ∞è</span>
                    <strong>1.52 MB</strong>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label>ÊêúÁ¥¢Êñá‰ª∂</label>
                    <input type="text" id="search" placeholder="ËæìÂÖ•Êñá‰ª∂Âêç..." oninput="searchNodes(this.value)">
                </div>

                <button onclick="resetView()">ÈáçÁΩÆËßÜÂõæ</button>
                <button onclick="toggleLabels()">ÂàáÊç¢Ê†áÁ≠æ</button>
            </div>

            <div class="legend">
                <h3>Âõæ‰æã</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3776ab"></div>
                    <span>Python</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f7df1e"></div>
                    <span>JavaScript</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3178c6"></div>
                    <span>TypeScript</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #808080"></div>
                    <span>ÂÖ∂‰ªñ</span>
                </div>
            </div>
        </div>

        <svg id="graph"></svg>
        <div class="tooltip"></div>
    </div>

    <script>
        const graphData = {"nodes": [{"id": "4fe6402a02fa", "name": "test_memory_retrieval", "type": "file", "path": "test_memory_retrieval.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 2202, "complexity": 7, "x": 636.3905167864299, "y": -0.005649110194252341, "metadata": {"language": "python", "imports": ["json", "requests"], "classes": [], "functions": [{"name": "test_retrieve_memory", "args": ["query", "project_id"], "docstring": "\u6d4b\u8bd5\u8bb0\u5fc6\u68c0\u7d22"}], "lines": 77, "x": 636.3905167864299, "y": -0.005649110194252341}}, {"id": "342e1fdbbb6c", "name": "mcp_server_enterprise", "type": "file", "path": "mcp_server_enterprise.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b5\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 35537, "complexity": 77, "x": 635.5604517275632, "y": 32.48906481853678, "metadata": {"language": "python", "imports": ["json", "asyncio", "time", "typing", "aiohttp", "aiohttp_cors", "datetime", "collections", "sys", "os", "uuid", "hashlib", "dataclasses", "psutil", "mcp_server_unified", "argparse", "src.mcp_core.services.websocket_service", "src.mcp_core.services.websocket_service", "src.mcp_core.services.dynamic_db_pool", "src.mcp_core.services.vector_db", "traceback", "traceback"], "classes": [{"name": "ConnectionInfo", "methods": ["to_dict"], "docstring": "\u8fde\u63a5\u4fe1\u606f"}, {"name": "RequestMetrics", "methods": [], "docstring": "\u8bf7\u6c42\u6307\u6807"}, {"name": "ServerStats", "methods": [], "docstring": "\u670d\u52a1\u5668\u7edf\u8ba1"}, {"name": "RateLimiter", "methods": ["__init__", "is_allowed", "get_remaining"], "docstring": "\u4ee4\u724c\u6876\u9650\u6d41\u5668"}, {"name": "MCPEnterpriseServer", "methods": ["__init__", "_setup_middleware", "_setup_routes", "_check_auth", "_check_rate_limit", "_record_request", "run"], "docstring": "\u4f01\u4e1a\u7ea7MCP\u670d\u52a1\u5668\n\n\u529f\u80fd\u63cf\u8ff0:\n- \u63d0\u4f9b\u751f\u4ea7\u7ea7\u7684MCP\u534f\u8bae\u670d\u52a1\uff0c\u652f\u6301HTTP\u4e0eSSE\u4f20\u8f93\n- \u96c6\u6210API\u5bc6\u94a5\u8ba4\u8bc1\u3001IP\u767d\u540d\u5355\u3001\u8bf7\u6c42\u9650\u6d41\u4e0e\u76d1\u63a7\u7edf\u8ba1\n- \u7ba1\u7406\u7aef\u70b9\u5305\u62ec\u5065\u5eb7\u68c0\u67e5\u3001\u7edf\u8ba1\u3001\u8fde\u63a5\u5217\u8868\u4e0ePrometheus\u6307\u6807\n\n\u4fee\u6539\u8005\uff1azhang\n\n\u53c2\u6570:\n- host: \u76d1\u542c\u5730\u5740\n- port: \u76d1\u542c\u7aef\u53e3\n- config_file: \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff08\u53ef\u9009\uff09\n- api_keys: \u5141\u8bb8\u8bbf\u95ee\u7684API\u5bc6\u94a5\u96c6\u5408\uff08\u53ef\u9009\uff09\n- allowed_ips: \u5141\u8bb8\u8bbf\u95ee\u7684IP\u767d\u540d\u5355\u96c6\u5408\uff08\u53ef\u9009\uff09\n- enable_cors: \u662f\u5426\u542f\u7528CORS\n- rate_limit: \u6bcf\u7a97\u53e3\u5141\u8bb8\u7684\u6700\u5927\u8bf7\u6c42\u6570\n- max_connections: \u5141\u8bb8\u7684\u6700\u5927\u5e76\u53d1\u8fde\u63a5\u6570\n\n\u8fd4\u56de\u503c:\n- \u65e0\uff08\u4f5c\u4e3a\u670d\u52a1\u5668\u7c7b\uff0c\u63d0\u4f9b\u8fd0\u884c\u4e0e\u7aef\u70b9\u5904\u7406\u65b9\u6cd5\uff09\n\n\u5f02\u5e38:\n- \u7aef\u70b9\u5904\u7406\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u629b\u51faaiohttp\u76f8\u5173\u5f02\u5e38\uff0c\u7edf\u4e00\u5728\u5904\u7406\u51fd\u6570\u4e2d\u6355\u83b7"}], "functions": [{"name": "main", "args": [], "docstring": null}], "lines": 1000, "x": 635.5604517275632, "y": 32.48906481853678}}, {"id": "0bcdc4643809", "name": "mcp_server_unified", "type": "file", "path": "mcp_server_unified.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 21890, "complexity": 53, "x": 633.0722452859769, "y": 64.89902568491951, "metadata": {"language": "python", "imports": ["json", "sys", "os", "logging", "typing", "datetime", "sqlalchemy", "sqlalchemy.orm", "config_manager", "src.mcp_core.services.memory_service", "src.mcp_core.code_knowledge_service", "src.mcp_core.project_context_service", "src.mcp_core.ai_understanding_service", "src.mcp_core.quality_guardian_service", "src.mcp_core.multi_lang_analyzer", "src.mcp_core.code_mcp_tools", "src.mcp_core.context_mcp_tools", "src.mcp_core.quality_mcp_tools", "src.mcp_core.services.error_firewall_service", "src.mcp_core.api.v1.tools.error_firewall", "argparse", "sys", "pathlib", "mcp_core.services.memory_service", "mcp_core.code_knowledge_service", "mcp_core.project_context_service", "mcp_core.ai_understanding_service", "mcp_core.quality_guardian_service", "mcp_core.multi_lang_analyzer", "mcp_core.code_mcp_tools", "mcp_core.context_mcp_tools", "mcp_core.quality_mcp_tools", "mcp_core.services.error_firewall_service", "mcp_core.api.v1.tools.error_firewall", "asyncio", "pathlib", "sqlalchemy.exc", "concurrent.futures"], "classes": [{"name": "UnifiedMCPServer", "methods": ["__init__", "_setup_logging", "_init_services", "get_all_tools", "handle_request", "_handle_initialize", "_handle_tools_list", "_handle_tools_call", "_call_memory_tool", "_call_code_tool", "_call_context_tool", "_call_ai_tool", "_call_quality_tool", "_call_error_firewall_tool", "_error_response", "run", "cleanup"], "docstring": "\u7edf\u4e00MCP\u670d\u52a1\u5668 - v2.0.0"}], "functions": [{"name": "main", "args": [], "docstring": "\u4e3b\u5165\u53e3"}], "lines": 571, "x": 633.0722452859769, "y": 64.89902568491951}}, {"id": "31e61285a22b", "name": "test_mcp_server", "type": "file", "path": "test_mcp_server.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c2\u4e2a\u51fd\u6570", "size": 4104, "complexity": 14, "x": 628.9324212416361, "y": 97.13968525016449, "metadata": {"language": "python", "imports": ["json", "subprocess", "sys", "traceback"], "classes": [], "functions": [{"name": "send_request", "args": ["process", "method", "params"], "docstring": "\u53d1\u9001JSON-RPC\u8bf7\u6c42"}, {"name": "main", "args": [], "docstring": "\u6d4b\u8bd5MCP\u670d\u52a1\u7aef"}], "lines": 144, "x": 628.9324212416361, "y": 97.13968525016449}}, {"id": "cd0844baf971", "name": "config_manager", "type": "file", "path": "config_manager.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b5\u4e2a\u7c7b\uff0c3\u4e2a\u51fd\u6570", "size": 10351, "complexity": 71, "x": 623.1517504795938, "y": 129.1269133136415, "metadata": {"language": "python", "imports": ["os", "typing", "dataclasses", "json", "urllib.parse", "re"], "classes": [{"name": "DatabaseConfig", "methods": ["url"], "docstring": "\u6570\u636e\u5e93\u914d\u7f6e"}, {"name": "AIConfig", "methods": ["enabled"], "docstring": "AI\u670d\u52a1\u914d\u7f6e"}, {"name": "ServerConfig", "methods": [], "docstring": "\u670d\u52a1\u5668\u914d\u7f6e"}, {"name": "PerformanceConfig", "methods": [], "docstring": "\u6027\u80fd\u914d\u7f6e"}, {"name": "ConfigManager", "methods": ["__init__", "_load_from_env", "_parse_database_url", "_load_from_file", "validate", "save_to_file", "print_summary"], "docstring": "\u914d\u7f6e\u7ba1\u7406\u5668"}], "functions": [{"name": "create_default_config", "args": ["config_file"], "docstring": "\u521b\u5efa\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6"}, {"name": "load_config", "args": ["config_file"], "docstring": "\u52a0\u8f7d\u914d\u7f6e\n\n\u4f18\u5148\u7ea7: \u73af\u5883\u53d8\u91cf > \u914d\u7f6e\u6587\u4ef6 > \u9ed8\u8ba4\u503c"}, {"name": "test_config_manager", "args": [], "docstring": "\u6d4b\u8bd5\u914d\u7f6e\u7ba1\u7406\u5668"}], "lines": 320, "x": 623.1517504795938, "y": 129.1269133136415}}, {"id": "ea127b08f922", "name": "test_simple_graph", "type": "file", "path": "test_simple_graph.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 5521, "complexity": 5, "x": 615.7453285033533, "y": 160.77728697761358, "metadata": {"language": "python", "imports": ["asyncio", "json", "pathlib", "sys", "src.mcp_core.services.project_graph_generator"], "classes": [], "functions": [], "lines": 179, "x": 615.7453285033533, "y": 160.77728697761358}}, {"id": "1372b7bb99c9", "name": "generate_mcp_graph", "type": "file", "path": "generate_mcp_graph.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 12697, "complexity": 5, "x": 606.7324217458365, "y": 192.00825189303683, "metadata": {"language": "python", "imports": ["asyncio", "json", "pathlib", "sys", "src.mcp_core.services.project_graph_generator"], "classes": [], "functions": [], "lines": 398, "x": 606.7324217458365, "y": 192.00825189303683}}, {"id": "083805acc140", "name": "test_error_firewall", "type": "file", "path": "test_error_firewall.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 7071, "complexity": 13, "x": 596.1366214354979, "y": 222.73828967105416, "metadata": {"language": "python", "imports": ["asyncio", "sys", "os", "sqlalchemy", "sqlalchemy.orm", "src.mcp_core.services.error_firewall_service", "src.mcp_core.api.v1.tools.error_firewall", "traceback"], "classes": [], "functions": [{"name": "get_db_session", "args": [], "docstring": "\u83b7\u53d6\u6570\u636e\u5e93\u4f1a\u8bdd"}], "lines": 220, "x": 596.1366214354979, "y": 222.73828967105416}}, {"id": "855b9964d0ae", "name": "mcp_client_http", "type": "file", "path": "mcp_client_http.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 2132, "complexity": 19, "x": 583.9854990488782, "y": 252.88727637440468, "metadata": {"language": "python", "imports": ["sys", "json", "requests", "typing"], "classes": [{"name": "MCPHTTPClient", "methods": ["__init__", "call_tool", "run"], "docstring": "MCP HTTP\u5ba2\u6237\u7aef - \u5c06stdio\u8bf7\u6c42\u8f6c\u53d1\u5230HTTP\u670d\u52a1\u5668"}], "functions": [{"name": "main", "args": [], "docstring": null}], "lines": 75, "x": 583.9854990488782, "y": 252.88727637440468}}, {"id": "1ffc23cad397", "name": "test_project_context_fix", "type": "file", "path": "test_project_context_fix.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 5757, "complexity": 11, "x": 570.3107981172096, "y": 282.3765514005343, "metadata": {"language": "python", "imports": ["sys", "os", "sqlalchemy", "sqlalchemy.orm", "mcp_core.project_context_service", "traceback"], "classes": [], "functions": [{"name": "test_project_context", "args": [], "docstring": "\u6d4b\u8bd5\u9879\u76ee\u4e0a\u4e0b\u6587\u670d\u52a1\u7684\u6240\u6709\u529f\u80fd"}], "lines": 163, "x": 570.3107981172096, "y": 282.3765514005343}}, {"id": "962ce4332f0f", "name": "test_graph_generator", "type": "file", "path": "test_graph_generator.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 5293, "complexity": 7, "x": 555.1481663169322, "y": 311.129200896763, "metadata": {"language": "python", "imports": ["asyncio", "os", "sys", "pathlib", "src.mcp_tools.graph_generator_tool", "src.mcp_core.common.logger", "src.mcp_core.services.project_graph_generator"], "classes": [], "functions": [], "lines": 161, "x": 555.1481663169322, "y": 311.129200896763}}, {"id": "0de4551d187a", "name": "test_end_to_end", "type": "file", "path": "test_end_to_end.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b2\u4e2a\u7c7b\uff0c9\u4e2a\u51fd\u6570", "size": 22868, "complexity": 75, "x": 538.5371558593814, "y": 339.07024872689055, "metadata": {"language": "python", "imports": ["argparse", "json", "sys", "time", "datetime", "pathlib", "typing", "config_manager", "mcp_server_unified", "traceback"], "classes": [{"name": "TestResult", "methods": ["__init__"], "docstring": "\u6d4b\u8bd5\u7ed3\u679c"}, {"name": "TestRunner", "methods": ["__init__", "run_test", "print_summary"], "docstring": "\u6d4b\u8bd5\u8fd0\u884c\u5668"}], "functions": [{"name": "test_memory_tools", "args": ["runner"], "docstring": "\u6d4b\u8bd5\u57fa\u7840\u8bb0\u5fc6\u5de5\u5177 (2\u4e2a)"}, {"name": "test_code_analysis_tools", "args": ["runner"], "docstring": "\u6d4b\u8bd5\u4ee3\u7801\u5206\u6790\u5de5\u5177 (8\u4e2a)"}, {"name": "test_context_management_tools", "args": ["runner"], "docstring": "\u6d4b\u8bd5\u9879\u76ee\u4e0a\u4e0b\u6587\u7ba1\u7406\u5de5\u5177 (12\u4e2a)"}, {"name": "test_quality_guardian_tools", "args": ["runner"], "docstring": "\u6d4b\u8bd5\u8d28\u91cf\u5b88\u62a4\u5de5\u5177 (8\u4e2a)"}, {"name": "test_ai_tools", "args": ["runner", "skip_if_no_key"], "docstring": "\u6d4b\u8bd5AI\u8f85\u52a9\u5de5\u5177 (7\u4e2a)"}, {"name": "test_complete_workflow", "args": ["runner"], "docstring": "\u6d4b\u8bd5\u5b8c\u6574\u5f00\u53d1\u5de5\u4f5c\u6d41"}, {"name": "test_performance", "args": ["runner"], "docstring": "\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5"}, {"name": "test_error_handling", "args": ["runner"], "docstring": "\u9519\u8bef\u5904\u7406\u6d4b\u8bd5"}, {"name": "main", "args": [], "docstring": "\u4e3b\u5165\u53e3"}], "lines": 763, "x": 538.5371558593814, "y": 339.07024872689055}}, {"id": "becde423f07f", "name": "test_intelligent_code_generator", "type": "file", "path": "test_intelligent_code_generator.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 11600, "complexity": 6, "x": 520.5210312278156, "y": 366.1267890080061, "metadata": {"language": "python", "imports": ["asyncio", "json", "typing", "src.mcp_core.services.intelligent_code_generator", "src.mcp_core.common.logger", "time"], "classes": [], "functions": [], "lines": 425, "x": 520.5210312278156, "y": 366.1267890080061}}, {"id": "2eeaed663bd0", "name": "setup", "type": "file", "path": "setup.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c12\u4e2a\u51fd\u6570", "size": 15746, "complexity": 87, "x": 501.1468840671363, "y": 392.22825444696986, "metadata": {"language": "python", "imports": ["argparse", "json", "os", "subprocess", "sys", "pathlib", "typing", "urllib.parse", "pymysql", "sqlalchemy", "sqlalchemy.orm", "src.mcp_core.models.tables", "src.mcp_core.code_knowledge_service", "src.mcp_core.project_context_service", "src.mcp_core.quality_guardian_service", "traceback", "traceback"], "classes": [{"name": "Colors", "methods": [], "docstring": null}], "functions": [{"name": "print_header", "args": ["text"], "docstring": "\u6253\u5370\u6807\u9898"}, {"name": "print_success", "args": ["text"], "docstring": "\u6253\u5370\u6210\u529f\u4fe1\u606f"}, {"name": "print_warning", "args": ["text"], "docstring": "\u6253\u5370\u8b66\u544a\u4fe1\u606f"}, {"name": "print_error", "args": ["text"], "docstring": "\u6253\u5370\u9519\u8bef\u4fe1\u606f"}, {"name": "print_info", "args": ["text"], "docstring": "\u6253\u5370\u4fe1\u606f"}, {"name": "check_python_version", "args": [], "docstring": "\u68c0\u67e5Python\u7248\u672c (\u9700\u8981 >= 3.9)"}, {"name": "check_and_install_dependencies", "args": ["auto_install"], "docstring": "\u68c0\u67e5\u5e76\u5b89\u88c5\u4f9d\u8d56"}, {"name": "check_mysql_connection", "args": ["config"], "docstring": "\u68c0\u67e5MySQL\u8fde\u63a5"}, {"name": "create_database_tables", "args": ["config"], "docstring": "\u521b\u5efa\u6240\u6709\u6570\u636e\u5e93\u8868"}, {"name": "generate_config_file", "args": ["output_path"], "docstring": "\u751f\u6210\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6"}, {"name": "verify_installation", "args": ["config"], "docstring": "\u9a8c\u8bc1\u5b89\u88c5"}, {"name": "main", "args": [], "docstring": "\u4e3b\u5165\u53e3"}], "lines": 472, "x": 501.1468840671363, "y": 392.22825444696986}}, {"id": "0c1f8f8f5b0d", "name": "test_design_decision_fix", "type": "file", "path": "test_design_decision_fix.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 1806, "complexity": 11, "x": 480.4651347531289, "y": 417.30658430527586, "metadata": {"language": "python", "imports": ["sys", "os", "sqlalchemy", "sqlalchemy.orm", "src.mcp_core.services.memory_service", "traceback"], "classes": [], "functions": [{"name": "test_design_decision", "args": [], "docstring": "\u6d4b\u8bd5\u8bbe\u8ba1\u51b3\u7b56\u5b58\u50a8"}], "lines": 63, "x": 480.4651347531289, "y": 417.30658430527586}}, {"id": "fb3ec566da6e", "name": "test_websocket_realdata", "type": "file", "path": "test_websocket_realdata.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 3500, "complexity": 4, "x": 458.52976002459445, "y": 441.29641848473585, "metadata": {"language": "python", "imports": ["asyncio", "websockets", "json", "sys"], "classes": [], "functions": [], "lines": 101, "x": 458.52976002459445, "y": 441.29641848473585}}, {"id": "1695db7f60aa", "name": "test_ai_assisted_development", "type": "file", "path": ".archived/scripts/test_ai_assisted_development.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c2\u4e2a\u51fd\u6570", "size": 13569, "complexity": 18, "x": 435.3978307851411, "y": 464.13520849511957, "metadata": {"language": "python", "imports": ["sys", "os", "sqlalchemy", "sqlalchemy.orm", "src.mcp_core.project_context_service", "src.mcp_core.code_knowledge_service", "src.mcp_core.context_mcp_tools", "src.mcp_core.ai_understanding_service"], "classes": [], "functions": [{"name": "print_section", "args": ["title"], "docstring": "\u6253\u5370\u5206\u8282\u6807\u9898"}, {"name": "test_complete_workflow", "args": [], "docstring": "\u6d4b\u8bd5\u5b8c\u6574\u5de5\u4f5c\u6d41"}], "lines": 352, "x": 435.3978307851411, "y": 464.13520849511957}}, {"id": "20f5ce286e51", "name": "test_code_knowledge_graph", "type": "file", "path": ".archived/scripts/test_code_knowledge_graph.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c6\u4e2a\u51fd\u6570", "size": 7294, "complexity": 39, "x": 411.129773544773, "y": 485.7633732208445, "metadata": {"language": "python", "imports": ["sys", "json", "pathlib", "sqlalchemy", "sqlalchemy.orm", "src.mcp_core.code_analyzer", "src.mcp_core.code_knowledge_service", "src.mcp_core.code_mcp_tools", "traceback"], "classes": [], "functions": [{"name": "print_section", "args": ["title"], "docstring": "\u6253\u5370\u7ae0\u8282\u6807\u9898"}, {"name": "test_code_analysis", "args": [], "docstring": "\u6d4b\u8bd51: \u4ee3\u7801\u5206\u6790"}, {"name": "test_storage", "args": ["result"], "docstring": "\u6d4b\u8bd52: \u77e5\u8bc6\u56fe\u8c31\u5b58\u50a8"}, {"name": "test_queries", "args": ["project_id"], "docstring": "\u6d4b\u8bd53: \u67e5\u8be2\u529f\u80fd"}, {"name": "test_mcp_tools", "args": ["project_id"], "docstring": "\u6d4b\u8bd54: MCP\u5de5\u5177"}, {"name": "main", "args": [], "docstring": "\u4e3b\u6d4b\u8bd5\u6d41\u7a0b"}], "lines": 241, "x": 411.129773544773, "y": 485.7633732208445}}, {"id": "c780331576f5", "name": "mcp_server_complete", "type": "file", "path": ".archived/servers/mcp_server_complete.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 18045, "complexity": 29, "x": 385.7886778642896, "y": 506.12455810208303, "metadata": {"language": "python", "imports": ["json", "sys", "os", "logging", "typing", "sqlalchemy", "sqlalchemy.orm", "src.mcp_core.services.memory_service", "src.mcp_core.code_knowledge_service", "src.mcp_core.project_context_service", "src.mcp_core.code_mcp_tools", "src.mcp_core.context_mcp_tools", "src.mcp_core.ai_understanding_service", "src.mcp_core.multi_lang_analyzer"], "classes": [{"name": "CompleteMCPServer", "methods": ["__init__", "_init_services", "handle_request", "_handle_initialize", "_handle_tools_list", "_handle_tools_call", "_call_store_memory", "_call_retrieve_memory", "_call_analyze_codebase", "_call_query_architecture", "_call_find_entity", "_call_trace_function_calls", "_call_find_dependencies", "_call_list_modules", "_call_explain_module", "_call_search_code_pattern", "_call_ai_tool", "_error_response", "run"], "docstring": "\u5b8c\u6574\u7684MCP\u670d\u52a1\u5668"}], "functions": [{"name": "main", "args": [], "docstring": "\u4e3b\u5165\u53e3"}], "lines": 495, "x": 385.7886778642896, "y": 506.12455810208303}}, {"id": "1b09da4fefbe", "name": "mcp_server_http_simple", "type": "file", "path": ".archived/servers/mcp_server_http_simple.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 7243, "complexity": 26, "x": 359.4405139467847, "y": 525.16578685344, "metadata": {"language": "python", "imports": ["json", "asyncio", "typing", "aiohttp", "aiohttp_cors", "datetime", "sys", "os", "mcp_server_unified", "argparse", "traceback"], "classes": [{"name": "MCPStandardServer", "methods": ["__init__", "_setup_routes", "run"], "docstring": "MCP\u6807\u51c6HTTP\u670d\u52a1\u5668"}], "functions": [{"name": "main", "args": [], "docstring": null}], "lines": 241, "x": 359.4405139467847, "y": 525.16578685344}}, {"id": "6a71f9c8e530", "name": "mcp_server_http_sse", "type": "file", "path": ".archived/servers/mcp_server_http_sse.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 10238, "complexity": 27, "x": 332.1538481815295, "y": 542.8372955180906, "metadata": {"language": "python", "imports": ["json", "asyncio", "typing", "aiohttp", "aiohttp_cors", "datetime", "sys", "os", "uuid", "mcp_server_unified", "argparse", "traceback"], "classes": [{"name": "MCPHTTPSSEServer", "methods": ["__init__", "_setup_routes", "run"], "docstring": "MCP HTTP+SSE\u670d\u52a1\u5668"}], "functions": [{"name": "main", "args": [], "docstring": null}], "lines": 310, "x": 332.1538481815295, "y": 542.8372955180906}}, {"id": "31616cebb991", "name": "mcp_server_http", "type": "file", "path": ".archived/servers/mcp_server_http.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 9573, "complexity": 24, "x": 303.9995639747945, "y": 559.0930812713533, "metadata": {"language": "python", "imports": ["json", "sys", "asyncio", "typing", "aiohttp", "aiohttp_cors", "datetime", "mcp_server_unified", "argparse"], "classes": [{"name": "MCPHTTPServer", "methods": ["__init__", "_setup_routes", "run"], "docstring": "MCP HTTP\u670d\u52a1\u5668 - \u5305\u88c5stdio MCP\u670d\u52a1\u5668\u4e3aHTTP API"}], "functions": [{"name": "main", "args": [], "docstring": "\u4e3b\u51fd\u6570"}], "lines": 305, "x": 303.9995639747945, "y": 559.0930812713533}}, {"id": "0f3826465d17", "name": "mcp_server_sse", "type": "file", "path": ".archived/servers/mcp_server_sse.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 10328, "complexity": 25, "x": 275.0508064074181, "y": 573.8906290482985, "metadata": {"language": "python", "imports": ["json", "asyncio", "typing", "aiohttp", "aiohttp_cors", "datetime", "sys", "os", "mcp_server_unified", "argparse"], "classes": [{"name": "MCPSSEServer", "methods": ["__init__", "_setup_routes", "run"], "docstring": "MCP SSE\u670d\u52a1\u5668 - \u63d0\u4f9b\u57fa\u4e8eHTTP SSE\u7684MCP\u534f\u8bae"}], "functions": [{"name": "main", "args": [], "docstring": null}], "lines": 298, "x": 275.0508064074181, "y": 573.8906290482985}}, {"id": "f1b34c67c0a6", "name": "test_memory_service", "type": "file", "path": "tests/test_memory_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b2\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 8367, "complexity": 22, "x": 245.38248122403022, "y": 587.191176228785, "metadata": {"language": "python", "imports": ["pytest", "src.mcp_core.services.memory_service"], "classes": [{"name": "TestMemoryService", "methods": ["test_extract_keywords_chinese", "test_extract_keywords_english", "test_extract_keywords_mixed", "test_store_memory_success", "test_retrieve_memory_success", "test_retrieve_memory_empty_query", "test_retrieve_memory_invalid_project_id", "test_retrieve_memory_no_results", "test_store_multiple_memories", "test_relevance_score_ordering"], "docstring": "\u8bb0\u5fc6\u670d\u52a1\u6d4b\u8bd5\u7c7b"}, {"name": "TestMemoryServiceIntegration", "methods": ["test_full_memory_workflow"], "docstring": "\u8bb0\u5fc6\u670d\u52a1\u96c6\u6210\u6d4b\u8bd5"}], "functions": [], "lines": 242, "x": 245.38248122403022, "y": 587.191176228785}}, {"id": "d7344fdab5b6", "name": "test_evolution_framework", "type": "file", "path": "tests/test_evolution_framework.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b7\u4e2a\u7c7b\uff0c2\u4e2a\u51fd\u6570", "size": 21269, "complexity": 97, "x": 215.07162768965168, "y": 598.959533796712, "metadata": {"language": "python", "imports": ["os", "sys", "json", "time", "asyncio", "unittest", "datetime", "typing", "unittest.mock", "numpy", "src.mcp_core.services.learning_system", "src.mcp_core.services.pattern_recognizer", "src.mcp_core.services.experience_manager", "src.mcp_core.services.graph_generator", "src.mcp_core.services.collaboration_controller", "shutil", "src.mcp_core.services.websocket_server"], "classes": [{"name": "EvolutionTestBase", "methods": ["setUpClass", "tearDownClass", "create_test_session", "create_test_experience"], "docstring": "\u6d4b\u8bd5\u57fa\u7c7b"}, {"name": "TestLearningSystem", "methods": ["setUp", "test_learn_from_session", "test_suggest_solution", "test_extract_patterns", "test_evaluate_experience_value"], "docstring": "\u5b66\u4e60\u7cfb\u7edf\u5355\u5143\u6d4b\u8bd5"}, {"name": "TestPatternRecognizer", "methods": ["setUp", "test_recognize_singleton_pattern", "test_detect_anti_patterns", "test_feature_extraction"], "docstring": "\u6a21\u5f0f\u8bc6\u522b\u5668\u5355\u5143\u6d4b\u8bd5"}, {"name": "TestExperienceManager", "methods": ["setUp", "test_store_and_retrieve_experience", "test_experience_evolution", "test_experience_sharing"], "docstring": "\u7ecf\u9a8c\u7ba1\u7406\u5668\u5355\u5143\u6d4b\u8bd5"}, {"name": "TestCollaborationController", "methods": ["setUp", "test_task_assignment", "test_lock_mechanism", "test_conflict_detection"], "docstring": "\u534f\u4f5c\u63a7\u5236\u5668\u5355\u5143\u6d4b\u8bd5"}, {"name": "TestIntegration", "methods": ["test_learning_and_pattern_integration", "test_experience_and_suggestion_integration"], "docstring": "\u96c6\u6210\u6d4b\u8bd5"}, {"name": "TestPerformance", "methods": ["test_learning_performance", "test_pattern_recognition_performance", "test_lock_contention_performance"], "docstring": "\u6027\u80fd\u6d4b\u8bd5"}], "functions": [{"name": "create_test_suite", "args": [], "docstring": "\u521b\u5efa\u6d4b\u8bd5\u5957\u4ef6"}, {"name": "run_tests", "args": ["verbosity"], "docstring": "\u8fd0\u884c\u6240\u6709\u6d4b\u8bd5"}], "lines": 667, "x": 215.07162768965168, "y": 598.959533796712}}, {"id": "484462fced51", "name": "conftest", "type": "file", "path": "tests/conftest.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c9\u4e2a\u51fd\u6570", "size": 3469, "complexity": 53, "x": 184.1970733329713, "y": 609.1641601430866, "metadata": {"language": "python", "imports": ["os", "pytest", "sqlalchemy", "sqlalchemy.orm", "typing", "src.mcp_core.services.redis_client", "src.mcp_core.services.memory_service", "src.mcp_core.services.project_context_service"], "classes": [], "functions": [{"name": "db_engine", "args": [], "docstring": "\u521b\u5efa\u6d4b\u8bd5\u6570\u636e\u5e93\u5f15\u64ce (session\u7ea7\u522b)"}, {"name": "db_session", "args": ["db_engine"], "docstring": "\u521b\u5efa\u6570\u636e\u5e93\u4f1a\u8bdd (function\u7ea7\u522b - \u6bcf\u4e2a\u6d4b\u8bd5\u72ec\u7acb)"}, {"name": "redis_client", "args": [], "docstring": "\u521b\u5efaRedis\u5ba2\u6237\u7aef (function\u7ea7\u522b)"}, {"name": "memory_service", "args": ["db_session"], "docstring": "\u521b\u5efa\u8bb0\u5fc6\u670d\u52a1\u5b9e\u4f8b (function\u7ea7\u522b)"}, {"name": "project_context_service", "args": ["db_session"], "docstring": "\u521b\u5efa\u9879\u76ee\u4e0a\u4e0b\u6587\u670d\u52a1\u5b9e\u4f8b (function\u7ea7\u522b)"}, {"name": "sample_project_id", "args": [], "docstring": "\u63d0\u4f9b\u6d4b\u8bd5\u9879\u76eeID"}, {"name": "sample_memory_data", "args": [], "docstring": "\u63d0\u4f9b\u6d4b\u8bd5\u8bb0\u5fc6\u6570\u636e"}, {"name": "sample_session_data", "args": [], "docstring": "\u63d0\u4f9b\u6d4b\u8bd5\u4f1a\u8bdd\u6570\u636e"}, {"name": "pytest_configure", "args": ["config"], "docstring": "\u914d\u7f6epytest markers"}], "lines": 127, "x": 184.1970733329713, "y": 609.1641601430866}}, {"id": "cf779b9c4e79", "name": "test_vector_db", "type": "file", "path": "tests/test_vector_db.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b9\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 21539, "complexity": 95, "x": 152.83934774830567, "y": 617.7774182497052, "metadata": {"language": "python", "imports": ["pytest", "unittest.mock", "pymilvus", "src.mcp_core.services.vector_db", "src.mcp_core.services.vector_db"], "classes": [{"name": "TestVectorDBClientInit", "methods": ["test_init_success", "test_init_connection_error", "test_init_collections_creates_missing", "test_init_collections_skips_existing"], "docstring": "\u5411\u91cf\u6570\u636e\u5e93\u5ba2\u6237\u7aef\u521d\u59cb\u5316\u6d4b\u8bd5"}, {"name": "TestCollectionManagement", "methods": ["mock_vector_client", "test_create_collection_success", "test_drop_collection_success", "test_drop_collection_not_exists"], "docstring": "Collection\u7ba1\u7406\u6d4b\u8bd5"}, {"name": "TestVectorOperations", "methods": ["mock_vector_client", "test_insert_vectors_success", "test_insert_vectors_batch", "test_insert_vectors_error", "test_convert_to_entities"], "docstring": "\u5411\u91cf\u64cd\u4f5c\u6d4b\u8bd5"}, {"name": "TestVectorSearch", "methods": ["mock_vector_client", "test_search_vectors_success", "test_search_vectors_with_filter", "test_search_vectors_loads_collection", "test_search_vectors_error"], "docstring": "\u5411\u91cf\u68c0\u7d22\u6d4b\u8bd5"}, {"name": "TestVectorDeletion", "methods": ["mock_vector_client", "test_delete_vectors_success", "test_delete_vectors_error"], "docstring": "\u5411\u91cf\u5220\u9664\u6d4b\u8bd5"}, {"name": "TestConditionalQuery", "methods": ["mock_vector_client", "test_query_vectors_success", "test_query_vectors_with_output_fields", "test_query_vectors_error"], "docstring": "\u6761\u4ef6\u67e5\u8be2\u6d4b\u8bd5"}, {"name": "TestCollectionStats", "methods": ["mock_vector_client", "test_get_collection_stats_success", "test_get_collection_stats_error"], "docstring": "Collection\u7edf\u8ba1\u6d4b\u8bd5"}, {"name": "TestConnectionManagement", "methods": ["mock_vector_client", "test_close_connection"], "docstring": "\u8fde\u63a5\u7ba1\u7406\u6d4b\u8bd5"}, {"name": "TestSingletonPattern", "methods": ["test_get_vector_db_client_singleton"], "docstring": "\u5355\u4f8b\u6a21\u5f0f\u6d4b\u8bd5"}], "functions": [], "lines": 609, "x": 152.83934774830567, "y": 617.7774182497052}}, {"id": "c300251e986f", "name": "test_redis_client", "type": "file", "path": "tests/test_redis_client.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b6\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 17686, "complexity": 67, "x": 121.0814535117766, "y": 624.7759734811498, "metadata": {"language": "python", "imports": ["json", "pytest", "unittest.mock", "datetime", "src.mcp_core.services.redis_client", "redis", "src.mcp_core.services.redis_client"], "classes": [{"name": "TestRedisClientInit", "methods": ["test_init_success", "test_init_connection_error", "test_mask_url"], "docstring": "Redis\u5ba2\u6237\u7aef\u521d\u59cb\u5316\u6d4b\u8bd5"}, {"name": "TestShortMemoryOperations", "methods": ["mock_redis_client", "test_store_short_memory_success", "test_store_short_memory_with_custom_ttl", "test_get_short_memories_success", "test_get_short_memories_empty", "test_get_short_memories_invalid_json", "test_delete_short_memory_success", "test_delete_short_memory_not_found"], "docstring": "\u77ed\u671f\u8bb0\u5fc6\u64cd\u4f5c\u6d4b\u8bd5"}, {"name": "TestCacheOperations", "methods": ["mock_redis_client", "test_cache_retrieval_result_success", "test_get_cached_retrieval_hit", "test_get_cached_retrieval_miss", "test_invalidate_cache_success", "test_invalidate_cache_no_keys"], "docstring": "\u7f13\u5b58\u64cd\u4f5c\u6d4b\u8bd5"}, {"name": "TestStatisticsOperations", "methods": ["mock_redis_client", "test_increment_token_saved_success", "test_increment_token_saved_with_custom_date", "test_get_token_stats_success", "test_get_token_stats_partial_data"], "docstring": "\u7edf\u8ba1\u64cd\u4f5c\u6d4b\u8bd5"}, {"name": "TestGenericOperations", "methods": ["mock_redis_client", "test_exists_key_true", "test_exists_key_false", "test_delete_keys_success", "test_delete_no_keys", "test_ttl_key", "test_close_connection", "test_context_manager"], "docstring": "\u901a\u7528\u64cd\u4f5c\u6d4b\u8bd5"}, {"name": "TestSingletonPattern", "methods": ["test_get_redis_client_singleton"], "docstring": "\u5355\u4f8b\u6a21\u5f0f\u6d4b\u8bd5"}], "functions": [], "lines": 531, "x": 121.0814535117766, "y": 624.7759734811498}}, {"id": "9c0d75717f48", "name": "test_project_context_service", "type": "file", "path": "tests/test_project_context_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 17632, "complexity": 44, "x": 89.00835735570132, "y": 630.1399676815731, "metadata": {"language": "python", "imports": ["pytest", "datetime", "unittest.mock", "src.mcp_core.project_context_service"], "classes": [{"name": "TestSessionManagement", "methods": ["mock_db", "context_manager", "test_start_session_success", "test_start_session_with_custom_id", "test_end_session_success", "test_end_session_not_found", "test_end_session_with_files_and_issues", "test_get_last_session", "test_get_session_history", "test_update_session_summary"], "docstring": "\u4f1a\u8bdd\u7ba1\u7406\u6d4b\u8bd5"}, {"name": "TestDesignDecisionManagement", "methods": ["mock_db", "context_manager", "test_record_decision_success", "test_record_decision_with_alternatives", "test_get_decisions_all", "test_get_decisions_by_category", "test_supersede_decision"], "docstring": "\u8bbe\u8ba1\u51b3\u7b56\u7ba1\u7406\u6d4b\u8bd5"}, {"name": "TestProjectNoteManagement", "methods": ["mock_db", "context_manager", "test_add_note_success", "test_add_note_with_code_and_tags", "test_get_notes_all", "test_get_notes_by_category", "test_get_notes_by_importance", "test_get_notes_unresolved_only", "test_resolve_note"], "docstring": "\u9879\u76ee\u7b14\u8bb0\u7ba1\u7406\u6d4b\u8bd5"}, {"name": "TestDataModels", "methods": ["test_project_session_model", "test_design_decision_model", "test_project_note_model", "test_development_todo_model"], "docstring": "\u6570\u636e\u6a21\u578b\u6d4b\u8bd5"}], "functions": [], "lines": 549, "x": 89.00835735570132, "y": 630.1399676815731}}, {"id": "e0928f4e3bc6", "name": "test_evolution_system", "type": "file", "path": "tests/test_evolution_system.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c5\u4e2a\u51fd\u6570", "size": 14373, "complexity": 36, "x": 56.701822526171185, "y": 633.8563116774385, "metadata": {"language": "python", "imports": ["os", "sys", "json", "time", "datetime", "asyncio", "src.mcp_core.services.learning_system", "src.mcp_core.services.graph_generator", "src.mcp_core.services.collaboration_controller", "time", "random"], "classes": [], "functions": [{"name": "test_learning_system", "args": [], "docstring": "\u6d4b\u8bd5\u7f16\u7801\u5b66\u4e60\u7cfb\u7edf"}, {"name": "test_graph_generator", "args": [], "docstring": "\u6d4b\u8bd5\u9879\u76ee\u56fe\u8c31\u751f\u6210"}, {"name": "test_collaboration_controller", "args": [], "docstring": "\u6d4b\u8bd5\u591aAI\u534f\u540c\u63a7\u5236"}, {"name": "test_performance", "args": [], "docstring": "\u6027\u80fd\u6d4b\u8bd5"}, {"name": "main", "args": [], "docstring": "\u8fd0\u884c\u6240\u6709\u6d4b\u8bd5"}], "lines": 470, "x": 56.701822526171185, "y": 633.8563116774385}}, {"id": "6adec165ff2e", "name": "test_websocket_client", "type": "file", "path": "tests/test_websocket_client.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 2452, "complexity": 4, "x": 24.249305857199737, "y": 635.9167924835682, "metadata": {"language": "python", "imports": ["asyncio", "aiohttp", "json", "datetime"], "classes": [], "functions": [], "lines": 69, "x": 24.249305857199737, "y": 635.9167924835682}}, {"id": "9dbf7672c4fa", "name": "test_config_manager", "type": "file", "path": "tests/test_config_manager.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b8\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 14126, "complexity": 86, "x": -8.26405702254596, "y": 636.3160468614624, "metadata": {"language": "python", "imports": ["os", "json", "pytest", "tempfile", "unittest.mock", "config_manager"], "classes": [{"name": "TestDatabaseConfig", "methods": ["test_database_config_defaults", "test_database_url_generation", "test_database_url_special_password"], "docstring": "\u6570\u636e\u5e93\u914d\u7f6e\u6d4b\u8bd5"}, {"name": "TestAIConfig", "methods": ["test_ai_config_defaults", "test_ai_enabled_with_key", "test_ai_disabled_without_key", "test_ai_disabled_empty_key"], "docstring": "AI\u914d\u7f6e\u6d4b\u8bd5"}, {"name": "TestConfigManagerInit", "methods": ["test_init_without_file", "test_init_with_nonexistent_file", "test_init_with_valid_file"], "docstring": "\u914d\u7f6e\u7ba1\u7406\u5668\u521d\u59cb\u5316\u6d4b\u8bd5"}, {"name": "TestEnvironmentVariableLoading", "methods": ["test_load_from_env_database", "test_load_from_env_database_url", "test_load_from_env_anthropic_key", "test_load_from_env_openai_key", "test_load_from_env_server_and_performance"], "docstring": "\u73af\u5883\u53d8\u91cf\u52a0\u8f7d\u6d4b\u8bd5"}, {"name": "TestConfigValidation", "methods": ["test_validate_success", "test_validate_missing_host", "test_validate_missing_user", "test_validate_missing_database"], "docstring": "\u914d\u7f6e\u9a8c\u8bc1\u6d4b\u8bd5"}, {"name": "TestConfigSaveLoad", "methods": ["test_save_to_file_success", "test_save_to_file_creates_directory", "test_load_from_file_success", "test_load_from_file_invalid_json"], "docstring": "\u914d\u7f6e\u4fdd\u5b58\u548c\u52a0\u8f7d\u6d4b\u8bd5"}, {"name": "TestHelperFunctions", "methods": ["test_create_default_config", "test_load_config_success", "test_load_config_validation_error"], "docstring": "\u8f85\u52a9\u51fd\u6570\u6d4b\u8bd5"}, {"name": "TestParseDatabaseURL", "methods": ["test_parse_database_url_standard", "test_parse_database_url_invalid"], "docstring": "\u6570\u636e\u5e93URL\u89e3\u6790\u6d4b\u8bd5"}], "functions": [], "lines": 490, "x": -8.26405702254596, "y": 636.3160468614624}}, {"id": "cc99b386e5b1", "name": "test_memory_service", "type": "file", "path": "tests/unit/test_memory_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b3\u4e2a\u7c7b\uff0c2\u4e2a\u51fd\u6570", "size": 5830, "complexity": 46, "x": -40.75375659689456, "y": 635.0535672365872, "metadata": {"language": "python", "imports": ["pytest", "unittest.mock", "datetime", "src.mcp_core.services.memory_service", "src.mcp_core.models.tables", "time"], "classes": [{"name": "TestMemoryService", "methods": ["test_extract_core_info", "test_extract_core_info_long_content", "test_calculate_relevance_score", "test_deduplicate_memories", "test_extract_keywords", "test_store_memory_validation", "test_store_long_memory_success", "test_retrieve_memory_cache_hit"], "docstring": "\u8bb0\u5fc6\u670d\u52a1\u6d4b\u8bd5\u7c7b"}, {"name": "TestMemoryServiceIntegration", "methods": ["test_full_memory_lifecycle"], "docstring": "\u96c6\u6210\u6d4b\u8bd5(\u9700\u8981\u771f\u5b9e\u6570\u636e\u5e93\u8fde\u63a5)"}, {"name": "TestMemoryPerformance", "methods": ["test_retrieval_performance"], "docstring": "\u6027\u80fd\u6d4b\u8bd5"}], "functions": [{"name": "mock_db_session", "args": [], "docstring": "Mock\u6570\u636e\u5e93\u4f1a\u8bdd"}, {"name": "memory_service", "args": ["mock_db_session"], "docstring": "Memory Service fixture"}], "lines": 163, "x": -40.75375659689456, "y": 635.0535672365872}}, {"id": "6ad0160b1cd2", "name": "__init__", "type": "file", "path": "tests/unit/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 56, "complexity": 0, "x": -73.13531882848741, "y": 632.1330217220658, "metadata": {"language": "python", "imports": [], "classes": [], "functions": [], "lines": 3, "x": -73.13531882848741, "y": 632.1330217220658}}, {"id": "88768485e9dd", "name": "test_hallucination_service", "type": "file", "path": "tests/unit/test_hallucination_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c2\u4e2a\u51fd\u6570", "size": 10013, "complexity": 54, "x": -105.32464242790176, "y": 627.5619546439386, "metadata": {"language": "python", "imports": ["pytest", "numpy", "unittest.mock", "src.mcp_core.services.hallucination_service"], "classes": [{"name": "TestHallucinationValidationService", "methods": ["test_init", "test_detect_no_hallucination", "test_detect_hallucination", "test_detect_no_memories", "test_detect_without_memory_service", "test_batch_detect"], "docstring": "\u5e7b\u89c9\u9a8c\u8bc1\u670d\u52a1\u6d4b\u8bd5"}, {"name": "TestAdaptiveThreshold", "methods": ["test_long_query_adjustment", "test_code_block_adjustment", "test_tech_terms_adjustment", "test_memory_count_adjustment", "test_threshold_bounds", "test_is_complex_task"], "docstring": "\u81ea\u9002\u5e94\u9608\u503c\u6d4b\u8bd5"}, {"name": "TestFactoryFunction", "methods": ["test_create_hallucination_service"], "docstring": "\u5de5\u5382\u51fd\u6570\u6d4b\u8bd5"}, {"name": "TestEdgeCases", "methods": ["test_empty_output", "test_very_short_output", "test_custom_threshold", "test_threshold_clamping"], "docstring": "\u8fb9\u7f18\u6848\u4f8b\u6d4b\u8bd5"}], "functions": [{"name": "mock_memory_service", "args": [], "docstring": "Mock\u8bb0\u5fc6\u670d\u52a1"}, {"name": "hallucination_service", "args": ["mock_memory_service"], "docstring": "\u5e7b\u89c9\u670d\u52a1fixture"}], "lines": 297, "x": -105.32464242790176, "y": 627.5619546439386}}, {"id": "f41b76a4746f", "name": "test_embedding_service", "type": "file", "path": "tests/unit/test_embedding_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b2\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 4963, "complexity": 30, "x": -137.23790571180155, "y": 621.3519760448464, "metadata": {"language": "python", "imports": ["pytest", "numpy", "unittest.mock", "src.mcp_core.services.embedding_service", "time"], "classes": [{"name": "TestEmbeddingService", "methods": ["test_encode_single", "test_encode_single_returns_list", "test_encode_batch", "test_calculate_similarity_cosine", "test_calculate_similarity_different_vectors", "test_find_most_similar", "test_get_dimension", "test_get_model_info", "test_cache_functionality", "test_invalid_similarity_metric"], "docstring": "\u5d4c\u5165\u670d\u52a1\u6d4b\u8bd5\u7c7b"}, {"name": "TestEmbeddingPerformance", "methods": ["test_batch_encoding_performance"], "docstring": "\u5d4c\u5165\u670d\u52a1\u6027\u80fd\u6d4b\u8bd5"}], "functions": [{"name": "embedding_service", "args": [], "docstring": "Embedding Service fixture"}], "lines": 156, "x": -137.23790571180155, "y": 621.3519760448464}}, {"id": "7abb6753bbcd", "name": "test_token_service", "type": "file", "path": "tests/unit/test_token_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 8945, "complexity": 50, "x": -168.79204686665304, "y": 613.5187148008316, "metadata": {"language": "python", "imports": ["pytest", "unittest.mock", "src.mcp_core.services.token_service", "src.mcp_core.services.compressors.code_compressor", "src.mcp_core.services.compressors.text_compressor"], "classes": [{"name": "TestTokenOptimizationService", "methods": ["test_count_tokens_english", "test_count_tokens_chinese", "test_count_tokens_mixed", "test_detect_content_type_code", "test_detect_content_type_text", "test_compress_short_content", "test_compress_content_with_cache", "test_compress_content_auto_detect", "test_batch_compress", "test_calculate_token_savings"], "docstring": "Token\u4f18\u5316\u670d\u52a1\u6d4b\u8bd5"}, {"name": "TestCodeCompressor", "methods": ["test_detect_language_python", "test_detect_language_javascript", "test_compress_python_code", "test_compress_generic_code"], "docstring": "\u4ee3\u7801\u538b\u7f29\u5668\u6d4b\u8bd5"}, {"name": "TestTextCompressor", "methods": ["test_split_sentences", "test_calculate_sentence_score", "test_compress_with_truncation", "test_extract_keywords"], "docstring": "\u6587\u672c\u538b\u7f29\u5668\u6d4b\u8bd5"}, {"name": "TestCompressionQuality", "methods": ["test_compression_rate_target", "test_compression_preserves_meaning"], "docstring": "\u538b\u7f29\u8d28\u91cf\u6d4b\u8bd5"}], "functions": [{"name": "token_service", "args": [], "docstring": "Token\u670d\u52a1fixture"}], "lines": 278, "x": -168.79204686665304, "y": 613.5187148008316}}, {"id": "4666d063bb9f", "name": "download_models", "type": "file", "path": "scripts/download_models.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c6\u4e2a\u51fd\u6570", "size": 10847, "complexity": 37, "x": -199.9052832117312, "y": 604.0818356350112, "metadata": {"language": "python", "imports": ["argparse", "sys", "pathlib", "typing", "yaml", "requests", "tqdm"], "classes": [], "functions": [{"name": "load_config", "args": ["config_path"], "docstring": "\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6"}, {"name": "download_file", "args": ["url", "save_path", "use_mirror", "mirror_url"], "docstring": "\u4e0b\u8f7d\u5355\u4e2a\u6587\u4ef6\n\nArgs:\n    url: \u4e0b\u8f7dURL\n    save_path: \u4fdd\u5b58\u8def\u5f84\n    use_mirror: \u662f\u5426\u4f7f\u7528\u955c\u50cf\n    mirror_url: \u955c\u50cfURL"}, {"name": "download_model", "args": ["model_type", "config", "force", "use_mirror"], "docstring": "\u4e0b\u8f7d\u6307\u5b9a\u7c7b\u578b\u7684\u6a21\u578b\n\nArgs:\n    model_type: \u6a21\u578b\u7c7b\u578b (embedding/code)\n    config: \u914d\u7f6e\u5b57\u5178\n    force: \u662f\u5426\u5f3a\u5236\u91cd\u65b0\u4e0b\u8f7d\n    use_mirror: \u662f\u5426\u4f7f\u7528\u955c\u50cf\n\nReturns:\n    \u662f\u5426\u6210\u529f"}, {"name": "validate_model", "args": ["model_type", "config"], "docstring": "\u9a8c\u8bc1\u6a21\u578b\u6587\u4ef6\u5b8c\u6574\u6027\n\nArgs:\n    model_type: \u6a21\u578b\u7c7b\u578b\n    config: \u914d\u7f6e\u5b57\u5178\n\nReturns:\n    \u662f\u5426\u6709\u6548"}, {"name": "list_models", "args": ["config"], "docstring": "\u5217\u51fa\u6240\u6709\u53ef\u4e0b\u8f7d\u7684\u6a21\u578b"}, {"name": "main", "args": [], "docstring": null}], "lines": 385, "x": -199.9052832117312, "y": 604.0818356350112}}, {"id": "cba94e871740", "name": "refactor_base", "type": "file", "path": "scripts/refactor_base.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c2\u4e2a\u51fd\u6570", "size": 3740, "complexity": 13, "x": -230.4968241994501, "y": 593.0649765771686, "metadata": {"language": "python", "imports": ["re", "os", "pathlib"], "classes": [], "functions": [{"name": "refactor_file", "args": ["file_path"], "docstring": "\u91cd\u6784\u5355\u4e2a\u6587\u4ef6\n\nArgs:\n    file_path: \u6587\u4ef6\u8def\u5f84\n\nReturns:\n    \u662f\u5426\u4fee\u6539\u6210\u529f"}, {"name": "main", "args": [], "docstring": "\u4e3b\u51fd\u6570"}], "lines": 136, "x": -230.4968241994501, "y": 593.0649765771686}}, {"id": "db3b360dec9a", "name": "init_database", "type": "file", "path": "scripts/init_database.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c4\u4e2a\u51fd\u6570", "size": 6116, "complexity": 29, "x": -260.4875871882623, "y": 580.4956223150169, "metadata": {"language": "python", "imports": ["sys", "pathlib", "passlib.context", "sqlalchemy", "src.mcp_core.common.config", "src.mcp_core.common.logger", "src.mcp_core.common.utils", "src.mcp_core.models.database", "src.mcp_core.models.tables"], "classes": [], "functions": [{"name": "create_tables", "args": [], "docstring": "\u521b\u5efa\u6240\u6709\u8868"}, {"name": "insert_initial_data", "args": [], "docstring": "\u63d2\u5165\u521d\u59cb\u6570\u636e"}, {"name": "check_database_connection", "args": [], "docstring": "\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5"}, {"name": "main", "args": [], "docstring": "\u4e3b\u51fd\u6570"}], "lines": 199, "x": -260.4875871882623, "y": 580.4956223150169}}, {"id": "6120d07163e0", "name": "verify_config", "type": "file", "path": "scripts/verify_config.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c7\u4e2a\u51fd\u6570", "size": 6898, "complexity": 42, "x": -289.80102642241206, "y": 566.4051358184691, "metadata": {"language": "python", "imports": ["sys", "pathlib", "sqlalchemy", "urllib.parse", "src.mcp_core.common.config", "src.mcp_core.common.config", "redis"], "classes": [], "functions": [{"name": "check_config_file", "args": [], "docstring": "\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u5b58\u5728"}, {"name": "check_database_url", "args": [], "docstring": "\u68c0\u67e5\u6570\u636e\u5e93URL\u914d\u7f6e"}, {"name": "check_mysql_connection", "args": ["db_url"], "docstring": "\u68c0\u67e5MySQL\u8fde\u63a5"}, {"name": "check_database_tables", "args": ["db_url"], "docstring": "\u68c0\u67e5\u6570\u636e\u5e93\u8868"}, {"name": "check_redis_connection", "args": [], "docstring": "\u68c0\u67e5Redis\u8fde\u63a5"}, {"name": "check_dependencies", "args": [], "docstring": "\u68c0\u67e5Python\u4f9d\u8d56"}, {"name": "main", "args": [], "docstring": "\u4e3b\u51fd\u6570"}], "lines": 251, "x": -289.80102642241206, "y": 566.4051358184691}}, {"id": "cc747cbcf7a4", "name": "eslint.config", "type": "file", "path": "mcp-admin-ui/eslint.config.js", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c0\u4e2a\u7ec4\u4ef6", "size": 616, "complexity": 0, "x": -318.36184613054877, "y": 550.8298671093618, "metadata": {"language": "javascript", "imports": ["@eslint/js", "globals", "eslint-plugin-react-hooks", "eslint-plugin-react-refresh", "typescript-eslint", "eslint/config"], "functions": [], "classes": [], "components": [], "lines": 23, "x": -318.36184613054877, "y": 550.8298671093618}}, {"id": "94e8cfbb6629", "name": "vite.config", "type": "file", "path": "mcp-admin-ui/vite.config.ts", "description": "TypeScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u63a5\u53e3\uff0c0\u4e2a\u7c7b\u578b\u5b9a\u4e49", "size": 161, "complexity": 0, "x": -346.09767210821803, "y": 533.8091276987126, "metadata": {"language": "typescript", "imports": ["vite", "@vitejs/plugin-react"], "functions": [], "classes": [], "components": [], "lines": 7, "interfaces": [], "types": [], "x": -346.09767210821803, "y": 533.8091276987126}}, {"id": "25baff532b5d", "name": "App", "type": "file", "path": "mcp-admin-ui/src/App.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570\uff0c1\u4e2a\u7ec4\u4ef6", "size": 3597, "complexity": 12, "x": -1000.0, "y": -295.4105040666171, "metadata": {"language": "javascript", "imports": ["react", "antd", "./pages/Dashboard", "./services/websocket"], "functions": ["App"], "classes": [], "components": ["handleReconnect"], "lines": 131, "framework": "react", "x": -1000.0, "y": -295.4105040666171}}, {"id": "4bc6767d0bc8", "name": "main", "type": "file", "path": "mcp-admin-ui/src/main.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c0\u4e2a\u7ec4\u4ef6", "size": 230, "complexity": 0, "x": -398.67331931770013, "y": 495.7292142330694, "metadata": {"language": "javascript", "imports": ["react", "react-dom/client", "./App.tsx"], "functions": [], "classes": [], "components": [], "lines": 10, "framework": "react", "x": -398.67331931770013, "y": 495.7292142330694}}, {"id": "e8fed71e8cb4", "name": "index", "type": "file", "path": "mcp-admin-ui/src/types/index.ts", "description": "TypeScript\u6a21\u5757\uff0c\u5305\u542b7\u4e2a\u63a5\u53e3\uff0c0\u4e2a\u7c7b\u578b\u5b9a\u4e49", "size": 1659, "complexity": 0, "x": 67.88357611901144, "y": 366.13671320039214, "metadata": {"language": "typescript", "imports": [], "functions": [], "classes": [], "components": [], "lines": 81, "interfaces": ["WSMessage", "PoolStats", "VectorSearchStats", "ErrorFirewallEvent", "SystemAlert", "OverviewStats", "ActivityLog"], "types": [], "x": 67.88357611901144, "y": 366.13671320039214}}, {"id": "a8f5bd892a69", "name": "OverviewTab", "type": "file", "path": "mcp-admin-ui/src/components/OverviewTab.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c0\u4e2a\u7ec4\u4ef6", "size": 10597, "complexity": 0, "x": -478.43350496068643, "y": 678.7061859443525, "metadata": {"language": "javascript", "imports": ["react", "antd", "echarts-for-react/lib/core", "echarts/core", "echarts/charts", "echarts/renderers", "../services/websocket", "../types"], "functions": [], "classes": [], "components": [], "lines": 384, "framework": "react", "x": -478.43350496068643, "y": 678.7061859443525}}, {"id": "4b27deef884e", "name": "ConnectionPoolTab", "type": "file", "path": "mcp-admin-ui/src/components/ConnectionPoolTab.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c0\u4e2a\u7ec4\u4ef6", "size": 11713, "complexity": 0, "x": -479.0078413419579, "y": 678.4678735969785, "metadata": {"language": "javascript", "imports": ["react", "antd", "echarts-for-react/lib/core", "echarts/core", "echarts/charts", "echarts/renderers", "../services/websocket", "../types"], "functions": [], "classes": [], "components": [], "lines": 464, "framework": "react", "x": -479.0078413419579, "y": 678.4678735969785}}, {"id": "76e3ca749a08", "name": "ErrorFirewallTab", "type": "file", "path": "mcp-admin-ui/src/components/ErrorFirewallTab.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c0\u4e2a\u7ec4\u4ef6", "size": 6244, "complexity": 0, "x": -479.6162400648473, "y": 678.1957529056664, "metadata": {"language": "javascript", "imports": ["react", "antd", "@ant-design/icons", "echarts-for-react/lib/core", "echarts/core", "echarts/charts", "echarts/components", "echarts/renderers", "../services/websocket", "../types"], "functions": [], "classes": [], "components": [], "lines": 170, "framework": "react", "x": -479.6162400648473, "y": 678.1957529056664}}, {"id": "c594fcd72ae9", "name": "VectorSearchTab", "type": "file", "path": "mcp-admin-ui/src/components/VectorSearchTab.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c0\u4e2a\u7ec4\u4ef6", "size": 5699, "complexity": 0, "x": -480.2468073806495, "y": 677.8970296310079, "metadata": {"language": "javascript", "imports": ["react", "antd", "@ant-design/icons", "echarts-for-react/lib/core", "echarts/core", "echarts/charts", "echarts/components", "echarts/renderers", "../services/websocket", "../types"], "functions": [], "classes": [], "components": [], "lines": 171, "framework": "react", "x": -480.2468073806495, "y": 677.8970296310079}}, {"id": "3f8176d2c26b", "name": "ProjectGraph", "type": "file", "path": "mcp-admin-ui/src/components/evolution/ProjectGraph.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c3\u4e2a\u51fd\u6570\uff0c2\u4e2a\u7ec4\u4ef6", "size": 14243, "complexity": 29, "x": -529.4755346990953, "y": 352.8200064309077, "metadata": {"language": "javascript", "imports": ["react", "antd", "d3"], "functions": ["dragstarted", "dragged", "dragended"], "classes": [], "components": ["renderGraph", "handleResize"], "lines": 472, "framework": "react", "x": -529.4755346990953, "y": 352.8200064309077}}, {"id": "232d3b1bc5e8", "name": "PatternLibrary", "type": "file", "path": "mcp-admin-ui/src/components/evolution/PatternLibrary.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c2\u4e2a\u7ec4\u4ef6", "size": 23180, "complexity": 14, "x": -546.8352172266718, "y": 325.3103859579578, "metadata": {"language": "javascript", "imports": ["react", "react-syntax-highlighter", "react-syntax-highlighter/dist/esm/styles/prism"], "functions": [], "classes": [], "components": ["toggleFavorite", "exportPattern"], "lines": 746, "framework": "react", "x": -546.8352172266718, "y": 325.3103859579578}}, {"id": "93f4d5631543", "name": "ExperienceHub", "type": "file", "path": "mcp-admin-ui/src/components/evolution/ExperienceHub.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c0\u4e2a\u7ec4\u4ef6", "size": 26781, "complexity": 0, "x": -562.7579978953999, "y": 296.9535262433661, "metadata": {"language": "javascript", "imports": ["react", "react-syntax-highlighter", "react-syntax-highlighter/dist/esm/styles/prism"], "functions": [], "classes": [], "components": [], "lines": 863, "framework": "react", "x": -562.7579978953999, "y": 296.9535262433661}}, {"id": "5e60843b22df", "name": "CollaborationMonitor", "type": "file", "path": "mcp-admin-ui/src/components/evolution/CollaborationMonitor.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c3\u4e2a\u7ec4\u4ef6", "size": 25998, "complexity": 21, "x": -577.2063987293145, "y": 267.82130793618205, "metadata": {"language": "javascript", "imports": ["react"], "functions": [], "classes": [], "components": ["getAgentStatusTag", "getLockStatusTag", "getTaskStatusTag"], "lines": 880, "framework": "react", "x": -577.2063987293145, "y": 267.82130793618205}}, {"id": "cb7b018a7018", "name": "LearningDashboard", "type": "file", "path": "mcp-admin-ui/src/components/evolution/LearningDashboard.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c0\u4e2a\u7ec4\u4ef6", "size": 22423, "complexity": 0, "x": -590.1443898575878, "y": 237.98899687821168, "metadata": {"language": "javascript", "imports": ["react"], "functions": [], "classes": [], "components": [], "lines": 706, "framework": "react", "x": -590.1443898575878, "y": 237.98899687821168}}, {"id": "600110404fc1", "name": "Dashboard", "type": "file", "path": "mcp-admin-ui/src/pages/Dashboard.tsx", "description": "JavaScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570\uff0c0\u4e2a\u7ec4\u4ef6", "size": 2251, "complexity": 0, "x": -601.5394930238327, "y": 207.5337737521906, "metadata": {"language": "javascript", "imports": ["antd", "../components/OverviewTab", "../components/ConnectionPoolTab", "../components/VectorSearchTab", "../components/ErrorFirewallTab"], "functions": [], "classes": [], "components": [], "lines": 100, "framework": "react", "x": -601.5394930238327, "y": 207.5337737521906}}, {"id": "80cf0939842e", "name": "websocket", "type": "file", "path": "mcp-admin-ui/src/services/websocket.ts", "description": "TypeScript\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u63a5\u53e3\uff0c1\u4e2a\u7c7b\u578b\u5b9a\u4e49", "size": 6928, "complexity": 15, "x": -475.34437702643515, "y": 48.71678137456609, "metadata": {"language": "typescript", "imports": ["../types"], "functions": ["getWebSocketClient"], "classes": ["WebSocketClient"], "components": [], "lines": 265, "interfaces": [], "types": ["MessageHandler"], "x": -475.34437702643515, "y": 48.71678137456609}}, {"id": "f7d702c59251", "name": "websocketClient", "type": "file", "path": "mcp-admin-ui/src/services/websocketClient.ts", "description": "TypeScript\u6a21\u5757\uff0c\u5305\u542b3\u4e2a\u63a5\u53e3\uff0c0\u4e2a\u7c7b\u578b\u5b9a\u4e49", "size": 9871, "complexity": 20, "x": -619.5420070230737, "y": 145.25446325479248, "metadata": {"language": "typescript", "imports": ["events", "react"], "functions": ["useWebSocket", "getWebSocketClient"], "classes": ["WebSocketClient"], "components": [], "lines": 415, "interfaces": ["WebSocketMessage", "WebSocketConfig", "UseWebSocketOptions"], "types": [], "x": -619.5420070230737, "y": 145.25446325479248}}, {"id": "6ecedc687af6", "name": "mcp_http_server", "type": "file", "path": "src/mcp_core/mcp_http_server.py", "description": "", "size": 15783, "complexity": 0, "x": -626.1543304873916, "y": 113.41509166811623, "metadata": {"x": -626.1543304873916, "y": 113.41509166811623}}, {"id": "2524dbdd8022", "name": "java_analyzer", "type": "file", "path": "src/mcp_core/java_analyzer.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 19822, "complexity": 22, "x": -631.131057718994, "y": 81.27887325530898, "metadata": {"language": "python", "imports": ["os", "typing", "pathlib", "dataclasses", "code_analyzer", "javalang", "hashlib"], "classes": [{"name": "JavaCodeAnalyzer", "methods": ["__init__", "analyze", "_generate_id", "_get_qualified_name", "_process_import", "_process_type_declaration", "_process_field", "_process_method", "_analyze_method_body", "build_dependency_graph", "detect_circular_dependencies", "analyze_impact"], "docstring": "Java\u4ee3\u7801\u5206\u6790\u5668"}], "functions": [{"name": "test_java_analyzer", "args": [], "docstring": "\u6d4b\u8bd5Java\u5206\u6790\u5668"}], "lines": 592, "x": -631.131057718994, "y": 81.27887325530898}}, {"id": "7f16916359f5", "name": "project_context_service", "type": "file", "path": "src/mcp_core/project_context_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b5\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 26961, "complexity": 66, "x": -634.4591893672518, "y": 48.92996069560043, "metadata": {"language": "python", "imports": ["typing", "datetime", "sqlalchemy", "sqlalchemy.orm", "mcp_core.models.base", "sqlalchemy", "sqlalchemy.orm", "uuid", "uuid", "uuid", "uuid"], "classes": [{"name": "ProjectSession", "methods": [], "docstring": "\u5f00\u53d1\u4f1a\u8bdd"}, {"name": "DesignDecision", "methods": [], "docstring": "\u8bbe\u8ba1\u51b3\u7b56\u8bb0\u5f55"}, {"name": "ProjectNote", "methods": [], "docstring": "\u9879\u76ee\u7b14\u8bb0"}, {"name": "DevelopmentTodo", "methods": [], "docstring": "\u5f00\u53d1TODO"}, {"name": "ProjectContextManager", "methods": ["__init__", "start_session", "end_session", "get_last_session", "get_session_history", "update_session_summary", "record_decision", "get_decisions", "supersede_decision", "add_note", "get_notes", "resolve_note", "create_todo", "update_todo_status", "get_todos", "get_next_todo", "generate_resume_context", "get_project_statistics"], "docstring": "\u9879\u76ee\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668"}], "functions": [{"name": "test_context_manager", "args": [], "docstring": "\u6d4b\u8bd5\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668"}], "lines": 739, "x": -634.4591893672518, "y": 48.92996069560043}}, {"id": "0cbed8c34bf5", "name": "code_knowledge_service", "type": "file", "path": "src/mcp_core/code_knowledge_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b5\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 18076, "complexity": 67, "x": -636.1302476224191, "y": 16.452685659034625, "metadata": {"language": "python", "imports": ["typing", "datetime", "sqlalchemy", "sqlalchemy.orm", "mcp_core.models.base", "code_analyzer", "models.tables", "sqlalchemy", "sqlalchemy.orm", "sqlalchemy", "src.mcp_core.models.tables", "hashlib"], "classes": [{"name": "CodeProject", "methods": [], "docstring": "\u4ee3\u7801\u9879\u76ee"}, {"name": "CodeEntityModel", "methods": [], "docstring": "\u4ee3\u7801\u5b9e\u4f53"}, {"name": "CodeRelationModel", "methods": [], "docstring": "\u4ee3\u7801\u5173\u7cfb"}, {"name": "CodeKnowledge", "methods": [], "docstring": "\u4ee3\u7801\u77e5\u8bc6\u6761\u76ee\uff08\u9ad8\u5c42\u6b21\u7406\u89e3\uff09"}, {"name": "CodeKnowledgeGraphService", "methods": ["__init__", "create_project", "_sync_to_projects_table", "store_analysis_result", "query_entity", "query_entities_by_type", "query_entities_by_file", "query_relations", "trace_calls", "find_dependencies", "query_architecture", "search_by_name"], "docstring": "\u4ee3\u7801\u77e5\u8bc6\u56fe\u8c31\u5b58\u50a8\u670d\u52a1"}], "functions": [{"name": "test_storage", "args": [], "docstring": "\u6d4b\u8bd5\u5b58\u50a8\u529f\u80fd"}], "lines": 505, "x": -636.1302476224191, "y": 16.452685659034625}}, {"id": "34fd22d44c55", "name": "__init__", "type": "file", "path": "src/mcp_core/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 244, "complexity": 1, "x": -636.1399379359434, "y": -16.067817456426116, "metadata": {"language": "python", "imports": ["common.config"], "classes": [], "functions": [], "lines": 12, "x": -636.1399379359434, "y": -16.067817456426116}}, {"id": "4dde0e533b39", "name": "code_mcp_tools", "type": "file", "path": "src/mcp_core/code_mcp_tools.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 18691, "complexity": 20, "x": -634.4885134851448, "y": -48.54642230484962, "metadata": {"language": "python", "imports": ["typing", "pathlib", "json", "code_analyzer", "code_knowledge_service"], "classes": [{"name": "MCPCodeAnalysisTools", "methods": ["__init__", "get_tools_definition", "analyze_codebase", "query_architecture", "find_entity", "trace_function_calls", "find_dependencies", "list_modules", "explain_module", "search_code_pattern"], "docstring": "MCP\u4ee3\u7801\u5206\u6790\u5de5\u5177\u96c6"}], "functions": [{"name": "register_code_analysis_tools", "args": ["mcp_server", "db_session"], "docstring": "\u5c06\u4ee3\u7801\u5206\u6790\u5de5\u5177\u6ce8\u518c\u5230MCP\u670d\u52a1\u5668\n\n\u7528\u6cd5:\n    from mcp_http_server import app\n    from code_mcp_tools import register_code_analysis_tools\n\n    register_code_analysis_tools(app, db_session)"}], "lines": 533, "x": -634.4885134851448, "y": -48.54642230484962}}, {"id": "86164bad29bd", "name": "swift_analyzer", "type": "file", "path": "src/mcp_core/swift_analyzer.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 16800, "complexity": 22, "x": -631.1800971059054, "y": -80.89791526439984, "metadata": {"language": "python", "imports": ["os", "re", "typing", "pathlib", "dataclasses", "code_analyzer", "hashlib"], "classes": [{"name": "SwiftCodeAnalyzer", "methods": ["__init__", "analyze", "_generate_id", "_get_qualified_name", "_extract_imports", "_extract_types", "_extract_properties", "_extract_methods", "_extract_top_level_functions", "_extract_extensions", "_parse_parameters", "_extract_modifiers", "_extract_docstring", "_find_matching_brace"], "docstring": "Swift\u4ee3\u7801\u5206\u6790\u5668"}], "functions": [{"name": "test_swift_analyzer", "args": [], "docstring": "\u6d4b\u8bd5Swift\u5206\u6790\u5668"}], "lines": 503, "x": -631.1800971059054, "y": -80.89791526439984}}, {"id": "d142276bd663", "name": "ai_understanding_service", "type": "file", "path": "src/mcp_core/ai_understanding_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b2\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 22908, "complexity": 31, "x": -626.2246829934837, "y": -113.04270249724561, "metadata": {"language": "python", "imports": ["os", "typing", "code_knowledge_service", "project_context_service", "anthropic", "json", "re", "json", "re", "json", "re"], "classes": [{"name": "AICodeUnderstandingService", "methods": ["__init__", "_call_claude", "understand_function", "understand_module", "explain_architecture", "generate_session_summary", "generate_resumption_briefing", "generate_todos_from_goal", "suggest_next_task", "decompose_task", "analyze_code_quality"], "docstring": "AI\u8f85\u52a9\u4ee3\u7801\u7406\u89e3\u670d\u52a1"}, {"name": "AIAssistantTools", "methods": ["__init__", "ai_understand_function", "ai_understand_module", "ai_explain_architecture", "ai_generate_resumption_briefing", "ai_generate_todos_from_goal", "ai_decompose_task", "ai_analyze_code_quality"], "docstring": "AI\u8f85\u52a9\u5de5\u5177"}], "functions": [], "lines": 702, "x": -626.2246829934837, "y": -113.04270249724561}}, {"id": "1552356dfeb3", "name": "code_analyzer", "type": "file", "path": "src/mcp_core/code_analyzer.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 14990, "complexity": 54, "x": -619.6348569690919, "y": -144.88549579390377, "metadata": {"language": "python", "imports": ["ast", "os", "json", "pathlib", "typing", "dataclasses", "collections", "hashlib", "sys"], "classes": [{"name": "CodeEntity", "methods": ["__post_init__"], "docstring": "\u4ee3\u7801\u5b9e\u4f53"}, {"name": "CodeRelation", "methods": ["__post_init__"], "docstring": "\u4ee3\u7801\u5173\u7cfb"}, {"name": "PythonCodeAnalyzer", "methods": ["__init__", "analyze", "_generate_id", "_get_qualified_name", "_get_docstring", "visit_ClassDef", "visit_FunctionDef", "visit_AsyncFunctionDef", "visit_Import", "visit_ImportFrom", "_analyze_function_body", "_get_name", "_generate_signature"], "docstring": "Python\u4ee3\u7801AST\u5206\u6790\u5668"}, {"name": "ProjectAnalyzer", "methods": ["__init__", "analyze_project", "_analyze_file", "_resolve_references", "export_json", "generate_graph_summary"], "docstring": "\u9879\u76ee\u7ea7\u522b\u5206\u6790\u5668"}], "functions": [{"name": "main", "args": [], "docstring": "\u6d4b\u8bd5\u4e3b\u51fd\u6570"}], "lines": 442, "x": -619.6348569690919, "y": -144.88549579390377}}, {"id": "e411b939b661", "name": "vue_analyzer", "type": "file", "path": "src/mcp_core/vue_analyzer.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 13764, "complexity": 22, "x": -611.427453417576, "y": -176.3489754758488, "metadata": {"language": "python", "imports": ["os", "re", "json", "typing", "pathlib", "code_analyzer", "hashlib"], "classes": [{"name": "VueCodeAnalyzer", "methods": ["__init__", "analyze", "_generate_id", "_extract_section", "_create_component_entity", "_analyze_script", "_analyze_options_api", "_extract_data", "_extract_computed", "_extract_methods", "_extract_props", "_extract_components", "_analyze_composition_api", "_analyze_template"], "docstring": "Vue.js\u4ee3\u7801\u5206\u6790\u5668"}], "functions": [{"name": "test_vue_analyzer", "args": [], "docstring": "\u6d4b\u8bd5Vue\u5206\u6790\u5668"}], "lines": 421, "x": -611.427453417576, "y": -176.3489754758488}}, {"id": "4e553ec3bd3e", "name": "quality_mcp_tools", "type": "file", "path": "src/mcp_core/quality_mcp_tools.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 14717, "complexity": 12, "x": -601.6240988308223, "y": -207.35093950865752, "metadata": {"language": "python", "imports": ["typing", "quality_guardian_service"], "classes": [{"name": "QualityGuardianTools", "methods": ["__init__", "detect_code_smells", "assess_technical_debt", "identify_debt_hotspots", "get_quality_trends", "resolve_quality_issue", "ignore_quality_issue", "generate_quality_report", "list_quality_issues"], "docstring": "\u8d28\u91cf\u5b88\u62a4\u8005\u5de5\u5177"}], "functions": [], "lines": 415, "x": -601.6240988308223, "y": -207.35093950865752}}, {"id": "f369b7fbc39c", "name": "context_mcp_tools", "type": "file", "path": "src/mcp_core/context_mcp_tools.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 23165, "complexity": 12, "x": -590.2505062177535, "y": -237.8105445444994, "metadata": {"language": "python", "imports": ["typing", "project_context_service"], "classes": [{"name": "ProjectContextTools", "methods": ["__init__", "start_dev_session", "end_dev_session", "record_design_decision", "add_project_note", "create_todo", "update_todo_status", "get_project_context", "list_todos", "get_next_todo", "list_design_decisions", "list_project_notes", "get_project_statistics"], "docstring": "\u9879\u76ee\u4e0a\u4e0b\u6587\u7ba1\u7406\u5de5\u5177"}], "functions": [], "lines": 640, "x": -590.2505062177535, "y": -237.8105445444994}}, {"id": "735015a3e7fa", "name": "main", "type": "file", "path": "src/mcp_core/main.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 5527, "complexity": 14, "x": -577.3364291938472, "y": -267.648372517836, "metadata": {"language": "python", "imports": ["contextlib", "typing", "fastapi", "fastapi.exceptions", "fastapi.middleware.cors", "fastapi.responses", "common.config", "common.logger", "models.database", "api.dependencies.database", "api.v1", "services", "services", "uvicorn"], "classes": [], "functions": [], "lines": 199, "x": -577.3364291938472, "y": -267.648372517836}}, {"id": "207b82477886", "name": "quality_guardian_service", "type": "file", "path": "src/mcp_core/quality_guardian_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b5\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 23557, "complexity": 70, "x": -562.9157508811734, "y": -296.78653907220496, "metadata": {"language": "python", "imports": ["os", "typing", "datetime", "collections", "sqlalchemy", "sqlalchemy.orm", "mcp_core.models.base", "code_knowledge_service", "sqlalchemy", "sqlalchemy.orm", "uuid", "uuid", "uuid", "uuid", "uuid"], "classes": [{"name": "QualityIssue", "methods": [], "docstring": "\u8d28\u91cf\u95ee\u9898\u8bb0\u5f55"}, {"name": "DebtSnapshot", "methods": [], "docstring": "\u6280\u672f\u503a\u52a1\u5feb\u7167"}, {"name": "QualityWarning", "methods": [], "docstring": "\u8d28\u91cf\u9884\u8b66"}, {"name": "RefactoringSuggestion", "methods": [], "docstring": "\u91cd\u6784\u5efa\u8bae"}, {"name": "QualityGuardianService", "methods": ["__init__", "detect_code_smells", "_detect_circular_dependencies", "_detect_long_functions", "_detect_god_classes", "_detect_tight_coupling", "assess_technical_debt", "identify_debt_hotspots", "get_quality_trends", "resolve_issue", "ignore_issue"], "docstring": "\u8d28\u91cf\u5b88\u62a4\u670d\u52a1"}], "functions": [{"name": "test_quality_guardian", "args": [], "docstring": "\u6d4b\u8bd5\u8d28\u91cf\u5b88\u62a4"}], "lines": 651, "x": -562.9157508811734, "y": -296.78653907220496}}, {"id": "8da930e2235d", "name": "multi_lang_analyzer", "type": "file", "path": "src/mcp_core/multi_lang_analyzer.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 10737, "complexity": 26, "x": -547.0260277737534, "y": -325.14936628711934, "metadata": {"language": "python", "imports": ["os", "pathlib", "typing", "collections", "code_analyzer", "sys", "code_analyzer", "vue_analyzer", "swift_analyzer", "json", "java_analyzer"], "classes": [{"name": "MultiLanguageAnalyzer", "methods": ["__init__", "analyze_project", "_scan_files", "_analyze_language", "_analyze_python_files", "_analyze_java_files", "_analyze_vue_files", "_analyze_swift_files", "_entity_to_dict", "_relation_to_dict", "export_json"], "docstring": "\u591a\u8bed\u8a00\u9879\u76ee\u5206\u6790\u5668"}], "functions": [{"name": "main", "args": [], "docstring": "\u547d\u4ee4\u884c\u5165\u53e3"}], "lines": 308, "x": -547.0260277737534, "y": -325.14936628711934}}, {"id": "a9bc89108766", "name": "mcp_server", "type": "file", "path": "src/mcp_core/mcp_server.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 17237, "complexity": 26, "x": -529.7088260828449, "y": -352.66295790589805, "metadata": {"language": "python", "imports": ["json", "sys", "logging", "typing", "datetime", "sqlalchemy", "sqlalchemy.orm", "common.config", "services.memory_service", "services.token_service", "services.hallucination_service"], "classes": [{"name": "MCPServer", "methods": ["__init__", "handle_request", "_handle_initialize", "_handle_resources_list", "_handle_resources_read", "_handle_tools_list", "_handle_tools_call", "_tool_store_memory", "_tool_retrieve_memory", "_tool_compress_content", "_tool_detect_hallucination", "_handle_prompts_list", "_handle_prompts_get", "_error_response", "run"], "docstring": "MCP\u534f\u8bae\u670d\u52a1\u7aef"}], "functions": [{"name": "main", "args": [], "docstring": "\u4e3b\u5165\u53e3"}], "lines": 515, "x": -529.7088260828449, "y": -352.66295790589805}}, {"id": "669234fb2772", "name": "database", "type": "file", "path": "src/mcp_core/models/database.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c3\u4e2a\u51fd\u6570", "size": 1344, "complexity": 20, "x": -511.00945309248766, "y": -379.25556386477723, "metadata": {"language": "python", "imports": ["typing", "sqlalchemy", "sqlalchemy.ext.declarative", "sqlalchemy.orm", "common.config"], "classes": [], "functions": [{"name": "get_db", "args": [], "docstring": "\u83b7\u53d6\u6570\u636e\u5e93\u4f1a\u8bdd(\u4f9d\u8d56\u6ce8\u5165\u7528)\n\nYields:\n    \u6570\u636e\u5e93\u4f1a\u8bdd\n\nExample:\n    @app.get(\"/items\")\n    def get_items(db: Session = Depends(get_db)):\n        return db.query(Item).all()"}, {"name": "init_db", "args": [], "docstring": "\u521d\u59cb\u5316\u6570\u636e\u5e93(\u521b\u5efa\u6240\u6709\u8868)"}, {"name": "drop_db", "args": [], "docstring": "\u5220\u9664\u6240\u6709\u8868(\u4ec5\u7528\u4e8e\u6d4b\u8bd5!)"}], "lines": 59, "x": -511.00945309248766, "y": -379.25556386477723}}, {"id": "8c9260ecfe65", "name": "__init__", "type": "file", "path": "src/mcp_core/models/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 1401, "complexity": 3, "x": -490.9766554180068, "y": -404.8579483162692, "metadata": {"language": "python", "imports": ["base", "database", "tables"], "classes": [], "functions": [], "lines": 80, "x": -490.9766554180068, "y": -404.8579483162692}}, {"id": "f5a160fca813", "name": "tables", "type": "file", "path": "src/mcp_core/models/tables.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b6\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 6548, "complexity": 66, "x": -469.66281293354746, "y": -429.4034447684186, "metadata": {"language": "python", "imports": ["datetime", "typing", "sqlalchemy", "sqlalchemy.orm", "sqlalchemy.sql", "database"], "classes": [{"name": "Project", "methods": ["__repr__"], "docstring": "\u9879\u76ee\u8868"}, {"name": "LongMemory", "methods": ["__repr__"], "docstring": "\u957f\u671f\u8bb0\u5fc6\u8868(\u6838\u5fc3\u4e8b\u5b9e)"}, {"name": "UserPermission", "methods": ["__repr__"], "docstring": "\u7528\u6237\u6743\u9650\u8868(\u7ec6\u7c92\u5ea6\u6743\u9650\u63a7\u5236)"}, {"name": "AuditLog", "methods": ["__repr__"], "docstring": "\u5ba1\u8ba1\u65e5\u5fd7\u8868"}, {"name": "User", "methods": ["__repr__"], "docstring": "\u7528\u6237\u8868(\u57fa\u7840\u8ba4\u8bc1)"}, {"name": "SystemConfig", "methods": ["__repr__"], "docstring": "\u7cfb\u7edf\u914d\u7f6e\u8868(\u52a8\u6001\u914d\u7f6e)"}], "functions": [], "lines": 171, "x": -469.66281293354746, "y": -429.4034447684186}}, {"id": "025fc36b8574", "name": "base", "type": "file", "path": "src/mcp_core/models/base.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c6\u4e2a\u51fd\u6570", "size": 6285, "complexity": 75, "x": -447.12359745622183, "y": -452.82802820844904, "metadata": {"language": "python", "imports": ["datetime", "typing", "sqlalchemy", "sqlalchemy.ext.declarative", "re"], "classes": [{"name": "TimestampMixin", "methods": [], "docstring": "\u65f6\u95f4\u6233Mixin\n\n\u81ea\u52a8\u6dfb\u52a0created_at\u548cupdated_at\u5b57\u6bb5"}, {"name": "SoftDeleteMixin", "methods": ["is_deleted", "soft_delete", "restore"], "docstring": "\u8f6f\u5220\u9664Mixin\n\n\u6dfb\u52a0deleted_at\u5b57\u6bb5,\u652f\u6301\u8f6f\u5220\u9664"}, {"name": "TableNameMixin", "methods": ["__tablename__"], "docstring": "\u8868\u540dMixin\n\n\u81ea\u52a8\u751f\u6210\u8868\u540d(\u7c7b\u540d\u8f6c\u86c7\u5f62\u547d\u540d)"}, {"name": "BaseModel", "methods": ["to_dict", "update_from_dict", "__repr__"], "docstring": "\u57fa\u7840\u6a21\u578b\u7c7b\n\n\u6240\u6709\u4e1a\u52a1\u6a21\u578b\u90fd\u5e94\u8be5\u7ee7\u627f\u8fd9\u4e2a\u7c7b,\u5b83\u63d0\u4f9b:\n- \u7edf\u4e00\u7684Base\n- \u81ea\u52a8\u7684\u65f6\u95f4\u6233\n- \u901a\u7528\u7684\u8f85\u52a9\u65b9\u6cd5\n\n\u4f7f\u7528\u793a\u4f8b:\n```python\nfrom mcp_core.models.base import BaseModel\n\nclass MyModel(BaseModel):\n    __tablename__ = \"my_models\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n```"}], "functions": [{"name": "get_metadata", "args": [], "docstring": "\u83b7\u53d6\u5168\u5c40\u5143\u6570\u636e\u5b9e\u4f8b\n\nReturns:\n    MetaData\u5b9e\u4f8b"}, {"name": "get_all_tables", "args": [], "docstring": "\u83b7\u53d6\u6240\u6709\u8868\u540d\n\nReturns:\n    \u8868\u540d\u5217\u8868"}, {"name": "get_table", "args": ["table_name"], "docstring": "\u83b7\u53d6\u6307\u5b9a\u8868\n\nArgs:\n    table_name: \u8868\u540d\n\nReturns:\n    Table\u5bf9\u8c61,\u5982\u679c\u4e0d\u5b58\u5728\u8fd4\u56deNone"}, {"name": "create_all_tables", "args": ["engine"], "docstring": "\u521b\u5efa\u6240\u6709\u8868\n\nArgs:\n    engine: SQLAlchemy Engine"}, {"name": "drop_all_tables", "args": ["engine"], "docstring": "\u5220\u9664\u6240\u6709\u8868(\u5371\u9669\u64cd\u4f5c!)\n\nArgs:\n    engine: SQLAlchemy Engine"}, {"name": "print_table_info", "args": [], "docstring": "\u6253\u5370\u6240\u6709\u8868\u4fe1\u606f"}], "lines": 279, "x": -447.12359745622183, "y": -452.82802820844904}}, {"id": "e13dc74a870f", "name": "__init__", "type": "file", "path": "src/mcp_core/schemas/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b29\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 8069, "complexity": 293, "x": -423.41767431336024, "y": -475.0708086083697, "metadata": {"language": "python", "imports": ["datetime", "typing", "pydantic"], "classes": [{"name": "BaseResponse", "methods": [], "docstring": "\u901a\u7528\u54cd\u5e94\u683c\u5f0f"}, {"name": "MemoryStoreRequest", "methods": ["validate_content"], "docstring": "\u5b58\u50a8\u8bb0\u5fc6\u8bf7\u6c42"}, {"name": "MemoryStoreResponse", "methods": [], "docstring": "\u5b58\u50a8\u8bb0\u5fc6\u54cd\u5e94"}, {"name": "MemoryRetrieveRequest", "methods": ["validate_levels"], "docstring": "\u68c0\u7d22\u8bb0\u5fc6\u8bf7\u6c42"}, {"name": "MemoryItem", "methods": [], "docstring": "\u5355\u6761\u8bb0\u5fc6"}, {"name": "MemoryRetrieveResponse", "methods": [], "docstring": "\u68c0\u7d22\u8bb0\u5fc6\u54cd\u5e94"}, {"name": "MemoryUpdateRequest", "methods": [], "docstring": "\u66f4\u65b0\u8bb0\u5fc6\u8bf7\u6c42"}, {"name": "MemoryDeleteRequest", "methods": [], "docstring": "\u5220\u9664\u8bb0\u5fc6\u8bf7\u6c42"}, {"name": "TokenCompressRequest", "methods": [], "docstring": "Token\u538b\u7f29\u8bf7\u6c42"}, {"name": "TokenCompressResponse", "methods": [], "docstring": "Token\u538b\u7f29\u54cd\u5e94"}, {"name": "HallucinationValidateRequest", "methods": [], "docstring": "\u5e7b\u89c9\u68c0\u6d4b\u8bf7\u6c42"}, {"name": "HallucinationValidateResponse", "methods": [], "docstring": "\u5e7b\u89c9\u68c0\u6d4b\u54cd\u5e94"}, {"name": "ProjectCreate", "methods": [], "docstring": "\u521b\u5efa\u9879\u76ee\u8bf7\u6c42"}, {"name": "ProjectResponse", "methods": [], "docstring": "\u9879\u76ee\u54cd\u5e94"}, {"name": "ProjectUpdate", "methods": [], "docstring": "\u66f4\u65b0\u9879\u76ee\u8bf7\u6c42"}, {"name": "PermissionGrant", "methods": [], "docstring": "\u6388\u4e88\u6743\u9650\u8bf7\u6c42"}, {"name": "PermissionRevoke", "methods": [], "docstring": "\u64a4\u9500\u6743\u9650\u8bf7\u6c42"}, {"name": "PermissionCheck", "methods": [], "docstring": "\u6743\u9650\u68c0\u67e5\u8bf7\u6c42"}, {"name": "PermissionCheckResponse", "methods": [], "docstring": "\u6743\u9650\u68c0\u67e5\u54cd\u5e94"}, {"name": "UserCreate", "methods": [], "docstring": "\u521b\u5efa\u7528\u6237\u8bf7\u6c42"}, {"name": "UserLogin", "methods": [], "docstring": "\u7528\u6237\u767b\u5f55\u8bf7\u6c42"}, {"name": "UserResponse", "methods": [], "docstring": "\u7528\u6237\u54cd\u5e94"}, {"name": "TokenResponse", "methods": [], "docstring": "Token\u54cd\u5e94"}, {"name": "AuditLogQuery", "methods": [], "docstring": "\u5ba1\u8ba1\u65e5\u5fd7\u67e5\u8be2\u8bf7\u6c42"}, {"name": "AuditLogItem", "methods": [], "docstring": "\u5ba1\u8ba1\u65e5\u5fd7\u9879"}, {"name": "AuditLogResponse", "methods": [], "docstring": "\u5ba1\u8ba1\u65e5\u5fd7\u54cd\u5e94"}, {"name": "ConfigUpdate", "methods": [], "docstring": "\u66f4\u65b0\u914d\u7f6e\u8bf7\u6c42"}, {"name": "ConfigResponse", "methods": [], "docstring": "\u914d\u7f6e\u54cd\u5e94"}, {"name": "HealthCheckResponse", "methods": [], "docstring": "\u5065\u5eb7\u68c0\u67e5\u54cd\u5e94"}], "functions": [], "lines": 313, "x": -423.41767431336024, "y": -475.0708086083697}}, {"id": "8f8332db867a", "name": "config", "type": "file", "path": "src/mcp_core/common/config.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b17\u4e2a\u7c7b\uff0c2\u4e2a\u51fd\u6570", "size": 10249, "complexity": 188, "x": -398.6068533496763, "y": -496.0738446007188, "metadata": {"language": "python", "imports": ["os", "functools", "pathlib", "typing", "yaml", "pydantic", "pydantic_settings", "warnings"], "classes": [{"name": "DatabaseSettings", "methods": [], "docstring": "\u6570\u636e\u5e93\u914d\u7f6e"}, {"name": "RedisSettings", "methods": [], "docstring": "Redis\u914d\u7f6e"}, {"name": "MilvusSettings", "methods": [], "docstring": "Milvus\u5411\u91cf\u6570\u636e\u5e93\u914d\u7f6e"}, {"name": "VectorDBSettings", "methods": [], "docstring": "\u5411\u91cf\u6570\u636e\u5e93\u914d\u7f6e"}, {"name": "MemorySettings", "methods": [], "docstring": "\u8bb0\u5fc6\u7ba1\u7406\u914d\u7f6e"}, {"name": "HuggingFaceSettings", "methods": [], "docstring": "Hugging Face\u914d\u7f6e"}, {"name": "ModelConfigSettings", "methods": [], "docstring": "\u5355\u4e2a\u6a21\u578b\u914d\u7f6e"}, {"name": "ModelsSettings", "methods": [], "docstring": "Hugging Face\u6a21\u578b\u914d\u7f6e"}, {"name": "TokenOptimizationSettings", "methods": [], "docstring": "Token\u4f18\u5316\u914d\u7f6e"}, {"name": "AntiHallucinationSettings", "methods": [], "docstring": "\u5e7b\u89c9\u6291\u5236\u914d\u7f6e"}, {"name": "JWTSettings", "methods": ["validate_secret_key"], "docstring": "JWT\u914d\u7f6e"}, {"name": "SecuritySettings", "methods": [], "docstring": "\u5b89\u5168\u914d\u7f6e"}, {"name": "LoggingSettings", "methods": [], "docstring": "\u65e5\u5fd7\u914d\u7f6e"}, {"name": "MonitoringSettings", "methods": [], "docstring": "\u76d1\u63a7\u914d\u7f6e"}, {"name": "APISettings", "methods": [], "docstring": "API\u914d\u7f6e"}, {"name": "AppSettings", "methods": [], "docstring": "\u5e94\u7528\u914d\u7f6e"}, {"name": "Settings", "methods": ["from_yaml", "_flatten_config"], "docstring": "\u4e3b\u914d\u7f6e\u7c7b"}], "functions": [{"name": "get_settings", "args": [], "docstring": "\u83b7\u53d6\u914d\u7f6e\u5355\u4f8b(\u5e26\u7f13\u5b58)"}, {"name": "load_config", "args": ["config_path"], "docstring": "\u52a0\u8f7d\u914d\u7f6e(\u4e0d\u5e26\u7f13\u5b58,\u7528\u4e8e\u6d4b\u8bd5)"}], "lines": 318, "x": -398.6068533496763, "y": -496.0738446007188}}, {"id": "cbdccabdc48b", "name": "__init__", "type": "file", "path": "src/mcp_core/common/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 500, "complexity": 3, "x": -372.756277471041, "y": -515.7821085431182, "metadata": {"language": "python", "imports": ["config", "logger", "utils"], "classes": [], "functions": [], "lines": 20, "x": -372.756277471041, "y": -515.7821085431182}}, {"id": "40a73bf75c05", "name": "logger", "type": "file", "path": "src/mcp_core/common/logger.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c3\u4e2a\u51fd\u6570", "size": 7198, "complexity": 64, "x": -345.9331769109088, "y": -534.1444310163779, "metadata": {"language": "python", "imports": ["json", "logging", "logging.handlers", "sys", "datetime", "pathlib", "typing", "config", "re"], "classes": [{"name": "SensitiveDataFilter", "methods": ["__init__", "filter", "_mask_string", "_mask_dict"], "docstring": "\u654f\u611f\u6570\u636e\u8fc7\u6ee4\u5668"}, {"name": "JSONFormatter", "methods": ["format"], "docstring": "JSON\u683c\u5f0f\u5316\u5668"}, {"name": "ColoredTextFormatter", "methods": ["format"], "docstring": "\u5f69\u8272\u6587\u672c\u683c\u5f0f\u5316\u5668(\u7528\u4e8e\u63a7\u5236\u53f0)"}, {"name": "LoggerAdapter", "methods": ["process"], "docstring": "\u65e5\u5fd7\u9002\u914d\u5668,\u652f\u6301\u9644\u52a0\u4e0a\u4e0b\u6587"}], "functions": [{"name": "setup_logging", "args": ["log_level", "log_format", "log_file"], "docstring": "\u914d\u7f6e\u65e5\u5fd7\u7cfb\u7edf\n\nArgs:\n    log_level: \u65e5\u5fd7\u7ea7\u522b\n    log_format: \u65e5\u5fd7\u683c\u5f0f(json/text)\n    log_file: \u65e5\u5fd7\u6587\u4ef6\u8def\u5f84"}, {"name": "get_logger", "args": ["name"], "docstring": "\u83b7\u53d6\u65e5\u5fd7\u5668\n\nArgs:\n    name: \u65e5\u5fd7\u5668\u540d\u79f0\n\nReturns:\n    logging.Logger\u5b9e\u4f8b"}, {"name": "get_context_logger", "args": ["name"], "docstring": "\u83b7\u53d6\u5e26\u4e0a\u4e0b\u6587\u7684\u65e5\u5fd7\u5668\n\nArgs:\n    name: \u65e5\u5fd7\u5668\u540d\u79f0\n    **context: \u4e0a\u4e0b\u6587\u5b57\u6bb5\n\nReturns:\n    LoggerAdapter\u5b9e\u4f8b\n\nExample:\n    logger = get_context_logger(\"mcp.api\", user_id=\"user_001\", request_id=\"req_123\")\n    logger.info(\"API called\")"}], "lines": 245, "x": -345.9331769109088, "y": -534.1444310163779}}, {"id": "856829afae1f", "name": "utils", "type": "file", "path": "src/mcp_core/common/utils.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c12\u4e2a\u51fd\u6570", "size": 6303, "complexity": 75, "x": -318.20722718036774, "y": -551.1131260081648, "metadata": {"language": "python", "imports": ["hashlib", "re", "uuid", "datetime", "typing"], "classes": [{"name": "Timer", "methods": ["__init__", "__enter__", "__exit__", "elapsed"], "docstring": "\u7b80\u5355\u7684\u8ba1\u65f6\u5668\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\n\nExample:\n    with Timer() as timer:\n        # \u6267\u884c\u64cd\u4f5c\n        pass\n    print(f\"\u8017\u65f6: {timer.elapsed}\u79d2\")"}], "functions": [{"name": "generate_id", "args": ["prefix"], "docstring": "\u751f\u6210\u552f\u4e00ID\n\nArgs:\n    prefix: ID\u524d\u7f00\n\nReturns:\n    \u683c\u5f0f\u5316\u7684\u552f\u4e00ID\n\nExample:\n    >>> generate_id(\"mem\")\n    'mem_20250118_a1b2c3d4'"}, {"name": "hash_content", "args": ["content", "algorithm"], "docstring": "\u8ba1\u7b97\u5185\u5bb9\u54c8\u5e0c\u503c\n\nArgs:\n    content: \u5185\u5bb9\u5b57\u7b26\u4e32\n    algorithm: \u54c8\u5e0c\u7b97\u6cd5(md5/sha1/sha256)\n\nReturns:\n    \u5341\u516d\u8fdb\u5236\u54c8\u5e0c\u503c"}, {"name": "truncate_string", "args": ["text", "max_length", "suffix"], "docstring": "\u622a\u65ad\u5b57\u7b26\u4e32\n\nArgs:\n    text: \u539f\u59cb\u6587\u672c\n    max_length: \u6700\u5927\u957f\u5ea6\n    suffix: \u540e\u7f00\n\nReturns:\n    \u622a\u65ad\u540e\u7684\u6587\u672c"}, {"name": "extract_keywords", "args": ["text", "max_keywords"], "docstring": "\u63d0\u53d6\u5173\u952e\u8bcd(\u7b80\u5316\u7248,\u5b9e\u9645\u5e94\u4f7f\u7528NLP\u7b97\u6cd5)\n\nArgs:\n    text: \u6587\u672c\u5185\u5bb9\n    max_keywords: \u6700\u5927\u5173\u952e\u8bcd\u6570\n\nReturns:\n    \u5173\u952e\u8bcd\u5217\u8868"}, {"name": "calculate_text_similarity", "args": ["text1", "text2"], "docstring": "\u8ba1\u7b97\u6587\u672c\u76f8\u4f3c\u5ea6(\u7b80\u5316\u7248,\u4f7f\u7528Jaccard\u76f8\u4f3c\u5ea6)\n\nArgs:\n    text1: \u6587\u672c1\n    text2: \u6587\u672c2\n\nReturns:\n    \u76f8\u4f3c\u5ea6\u5206\u6570(0-1)"}, {"name": "utc_now", "args": [], "docstring": "\u83b7\u53d6\u5f53\u524dUTC\u65f6\u95f4(\u5e26\u65f6\u533a)"}, {"name": "format_timestamp", "args": ["dt", "fmt"], "docstring": "\u683c\u5f0f\u5316\u65f6\u95f4\u6233\n\nArgs:\n    dt: datetime\u5bf9\u8c61\n    fmt: \u683c\u5f0f\u5b57\u7b26\u4e32\n\nReturns:\n    \u683c\u5f0f\u5316\u540e\u7684\u65f6\u95f4\u5b57\u7b26\u4e32"}, {"name": "parse_timestamp", "args": ["ts_str", "fmt"], "docstring": "\u89e3\u6790\u65f6\u95f4\u5b57\u7b26\u4e32\n\nArgs:\n    ts_str: \u65f6\u95f4\u5b57\u7b26\u4e32\n    fmt: \u683c\u5f0f\u5b57\u7b26\u4e32\n\nReturns:\n    datetime\u5bf9\u8c61"}, {"name": "safe_divide", "args": ["numerator", "denominator", "default"], "docstring": "\u5b89\u5168\u9664\u6cd5(\u907f\u514d\u9664\u96f6\u9519\u8bef)\n\nArgs:\n    numerator: \u5206\u5b50\n    denominator: \u5206\u6bcd\n    default: \u9ed8\u8ba4\u503c(\u5f53\u5206\u6bcd\u4e3a0\u65f6)\n\nReturns:\n    \u9664\u6cd5\u7ed3\u679c"}, {"name": "merge_dicts", "args": [], "docstring": "\u5408\u5e76\u591a\u4e2a\u5b57\u5178\n\nArgs:\n    *dicts: \u8981\u5408\u5e76\u7684\u5b57\u5178\n    deep: \u662f\u5426\u6df1\u5ea6\u5408\u5e76\n\nReturns:\n    \u5408\u5e76\u540e\u7684\u5b57\u5178"}, {"name": "validate_project_id", "args": ["project_id"], "docstring": "\u9a8c\u8bc1\u9879\u76eeID\u683c\u5f0f\n\nArgs:\n    project_id: \u9879\u76eeID\n\nReturns:\n    \u662f\u5426\u5408\u6cd5"}, {"name": "sanitize_input", "args": ["text", "max_length"], "docstring": "\u6e05\u7406\u7528\u6237\u8f93\u5165(\u9632\u6ce8\u5165)\n\nArgs:\n    text: \u539f\u59cb\u6587\u672c\n    max_length: \u6700\u5927\u957f\u5ea6\n\nReturns:\n    \u6e05\u7406\u540e\u7684\u6587\u672c"}], "lines": 298, "x": -318.20722718036774, "y": -551.1131260081648}}, {"id": "c583bab636c3", "name": "__init__", "type": "file", "path": "src/mcp_core/api/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 95, "complexity": 0, "x": -289.6513214939466, "y": -566.6436156019012, "metadata": {"language": "python", "imports": [], "classes": [], "functions": [], "lines": 10, "x": -289.6513214939466, "y": -566.6436156019012}}, {"id": "fa22735b35e2", "name": "auth", "type": "file", "path": "src/mcp_core/api/v1/auth.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b5\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 5537, "complexity": 59, "x": -260.3394580948763, "y": -580.6957144126162, "metadata": {"language": "python", "imports": ["datetime", "typing", "fastapi", "pydantic", "sqlalchemy.orm", "common.logger", "common.utils", "models.tables", "dependencies"], "classes": [{"name": "LoginRequest", "methods": [], "docstring": "\u767b\u5f55\u8bf7\u6c42"}, {"name": "LoginResponse", "methods": [], "docstring": "\u767b\u5f55\u54cd\u5e94"}, {"name": "RegisterRequest", "methods": [], "docstring": "\u6ce8\u518c\u8bf7\u6c42"}, {"name": "RegisterResponse", "methods": [], "docstring": "\u6ce8\u518c\u54cd\u5e94"}, {"name": "UserInfoResponse", "methods": [], "docstring": "\u7528\u6237\u4fe1\u606f\u54cd\u5e94"}], "functions": [], "lines": 223, "x": -260.3394580948763, "y": -580.6957144126162}}, {"id": "6b106ecc3a62", "name": "token", "type": "file", "path": "src/mcp_core/api/v1/token.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b6\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 6413, "complexity": 67, "x": -230.3486242873707, "y": -593.2324977142234, "metadata": {"language": "python", "imports": ["typing", "fastapi", "pydantic", "common.logger", "models.tables", "services", "dependencies"], "classes": [{"name": "CompressRequest", "methods": [], "docstring": "\u538b\u7f29\u8bf7\u6c42"}, {"name": "CompressResponse", "methods": [], "docstring": "\u538b\u7f29\u54cd\u5e94"}, {"name": "BatchCompressRequest", "methods": [], "docstring": "\u6279\u91cf\u538b\u7f29\u8bf7\u6c42"}, {"name": "BatchCompressResponse", "methods": [], "docstring": "\u6279\u91cf\u538b\u7f29\u54cd\u5e94"}, {"name": "TokenStatsResponse", "methods": [], "docstring": "Token\u7edf\u8ba1\u54cd\u5e94"}, {"name": "CalculateTokenRequest", "methods": [], "docstring": "\u8ba1\u7b97Token\u8bf7\u6c42"}], "functions": [], "lines": 227, "x": -230.3486242873707, "y": -593.2324977142234}}, {"id": "e41de44eb3a7", "name": "memory", "type": "file", "path": "src/mcp_core/api/v1/memory.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b7\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 7626, "complexity": 78, "x": -199.75683548551225, "y": -604.2214366470898, "metadata": {"language": "python", "imports": ["typing", "fastapi", "pydantic", "sqlalchemy.orm", "common.logger", "models.tables", "services", "dependencies"], "classes": [{"name": "StoreMemoryRequest", "methods": [], "docstring": "\u5b58\u50a8\u8bb0\u5fc6\u8bf7\u6c42"}, {"name": "StoreMemoryResponse", "methods": [], "docstring": "\u5b58\u50a8\u8bb0\u5fc6\u54cd\u5e94"}, {"name": "RetrieveMemoryRequest", "methods": [], "docstring": "\u68c0\u7d22\u8bb0\u5fc6\u8bf7\u6c42"}, {"name": "MemoryItem", "methods": [], "docstring": "\u8bb0\u5fc6\u9879"}, {"name": "RetrieveMemoryResponse", "methods": [], "docstring": "\u68c0\u7d22\u8bb0\u5fc6\u54cd\u5e94"}, {"name": "UpdateMemoryRequest", "methods": [], "docstring": "\u66f4\u65b0\u8bb0\u5fc6\u8bf7\u6c42"}, {"name": "DeleteMemoryResponse", "methods": [], "docstring": "\u5220\u9664\u8bb0\u5fc6\u54cd\u5e94"}], "functions": [], "lines": 284, "x": -199.75683548551225, "y": -604.2214366470898}}, {"id": "75bc86c8e708", "name": "__init__", "type": "file", "path": "src/mcp_core/api/v1/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 166, "complexity": 0, "x": -168.64356702139423, "y": -613.6339824670858, "metadata": {"language": "python", "imports": [], "classes": [], "functions": [], "lines": 13, "x": -168.64356702139423, "y": -613.6339824670858}}, {"id": "a310ab2759c5", "name": "validate", "type": "file", "path": "src/mcp_core/api/v1/validate.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b5\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 5811, "complexity": 58, "x": -137.09061122547703, "y": -621.4453786957287, "metadata": {"language": "python", "imports": ["typing", "fastapi", "pydantic", "sqlalchemy.orm", "common.logger", "models.tables", "services", "dependencies"], "classes": [{"name": "ValidateRequest", "methods": [], "docstring": "\u9a8c\u8bc1\u8bf7\u6c42"}, {"name": "ValidateResponse", "methods": [], "docstring": "\u9a8c\u8bc1\u54cd\u5e94"}, {"name": "BatchValidateRequest", "methods": [], "docstring": "\u6279\u91cf\u9a8c\u8bc1\u8bf7\u6c42"}, {"name": "BatchValidateItem", "methods": [], "docstring": "\u6279\u91cf\u9a8c\u8bc1\u9879"}, {"name": "BatchValidateResponse", "methods": [], "docstring": "\u6279\u91cf\u9a8c\u8bc1\u54cd\u5e94"}], "functions": [], "lines": 202, "x": -137.09061122547703, "y": -621.4453786957287}}, {"id": "3e5665a23385", "name": "project", "type": "file", "path": "src/mcp_core/api/v1/project.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b5\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 9807, "complexity": 59, "x": -105.17970067203954, "y": -627.6354174759356, "metadata": {"language": "python", "imports": ["datetime", "typing", "fastapi", "pydantic", "sqlalchemy.orm", "common.logger", "common.utils", "models.tables", "dependencies"], "classes": [{"name": "CreateProjectRequest", "methods": [], "docstring": "\u521b\u5efa\u9879\u76ee\u8bf7\u6c42"}, {"name": "CreateProjectResponse", "methods": [], "docstring": "\u521b\u5efa\u9879\u76ee\u54cd\u5e94"}, {"name": "UpdateProjectRequest", "methods": [], "docstring": "\u66f4\u65b0\u9879\u76ee\u8bf7\u6c42"}, {"name": "ProjectResponse", "methods": [], "docstring": "\u9879\u76ee\u54cd\u5e94"}, {"name": "ListProjectsResponse", "methods": [], "docstring": "\u9879\u76ee\u5217\u8868\u54cd\u5e94"}], "functions": [], "lines": 348, "x": -105.17970067203954, "y": -627.6354174759356}}, {"id": "c09332ce99c6", "name": "error_firewall", "type": "file", "path": "src/mcp_core/api/v1/tools/error_firewall.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 11848, "complexity": 3, "x": -72.99468483742965, "y": -632.1878739864508, "metadata": {"language": "python", "imports": ["typing", "src.mcp_core.services.error_firewall_service", "src.mcp_core.common.logger"], "classes": [], "functions": [], "lines": 401, "x": -72.99468483742965, "y": -632.1878739864508}}, {"id": "f5d39f43f660", "name": "auth", "type": "file", "path": "src/mcp_core/api/dependencies/auth.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c6\u4e2a\u51fd\u6570", "size": 5478, "complexity": 41, "x": -40.6192235214661, "y": -635.0909590683827, "metadata": {"language": "python", "imports": ["datetime", "typing", "fastapi", "fastapi.security", "jose", "passlib.context", "sqlalchemy.orm", "common.config", "common.logger", "models.tables", "database"], "classes": [], "functions": [{"name": "verify_password", "args": ["plain_password", "hashed_password"], "docstring": "\u9a8c\u8bc1\u5bc6\u7801"}, {"name": "get_password_hash", "args": ["password"], "docstring": "\u751f\u6210\u5bc6\u7801\u54c8\u5e0c"}, {"name": "create_access_token", "args": ["data", "expires_delta"], "docstring": "\u521b\u5efaJWT\u8bbf\u95ee\u4ee4\u724c"}, {"name": "decode_access_token", "args": ["token"], "docstring": "\u89e3\u7801JWT\u4ee4\u724c"}, {"name": "check_permission", "args": ["permission_name"], "docstring": "\u6743\u9650\u68c0\u67e5\u88c5\u9970\u5668\u5de5\u5382\n\n\u7528\u6cd5:\n@router.get(\"/protected\")\nasync def protected_route(\n    current_user: User = Depends(check_permission(\"memory.read\"))\n):\n    ..."}, {"name": "authenticate_user", "args": ["db", "username", "password"], "docstring": "\u8ba4\u8bc1\u7528\u6237"}], "lines": 200, "x": -40.6192235214661, "y": -635.0909590683827}}, {"id": "2905209e9323", "name": "database", "type": "file", "path": "src/mcp_core/api/dependencies/database.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 780, "complexity": 9, "x": -8.137496389053798, "y": -636.3370544135407, "metadata": {"language": "python", "imports": ["typing", "sqlalchemy", "sqlalchemy.orm", "common.config"], "classes": [], "functions": [{"name": "get_db", "args": [], "docstring": "\u83b7\u53d6\u6570\u636e\u5e93\u4f1a\u8bdd\n\n\u7528\u6cd5:\n@router.get(\"/\")\nasync def route(db: Session = Depends(get_db)):\n    ..."}], "lines": 38, "x": -8.137496389053798, "y": -636.3370544135407}}, {"id": "83bd11096476", "name": "__init__", "type": "file", "path": "src/mcp_core/api/dependencies/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 449, "complexity": 2, "x": 24.36515806094477, "y": -635.9229425914342, "metadata": {"language": "python", "imports": ["auth", "database"], "classes": [], "functions": [], "lines": 25, "x": 24.36515806094477, "y": -635.9229425914342}}, {"id": "cc5bdf9deed1", "name": "preset_patterns", "type": "file", "path": "src/mcp_core/data/preset_patterns.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c4\u4e2a\u51fd\u6570", "size": 24244, "complexity": 25, "x": 56.80454919363552, "y": -633.8496522796621, "metadata": {"language": "python", "imports": ["json", "hashlib", "datetime", "typing", "services.pattern_recognizer"], "classes": [], "functions": [{"name": "generate_pattern_id", "args": ["pattern_name"], "docstring": "\u751f\u6210\u6a21\u5f0fID"}, {"name": "prepare_pattern_data", "args": ["patterns", "pattern_source"], "docstring": "\u51c6\u5907\u6a21\u5f0f\u6570\u636e\u7528\u4e8e\u63d2\u5165\u6570\u636e\u5e93"}, {"name": "export_patterns_to_json", "args": ["filename"], "docstring": "\u5bfc\u51fa\u6240\u6709\u9884\u7f6e\u6a21\u5f0f\u5230JSON\u6587\u4ef6"}, {"name": "load_patterns_to_database", "args": [], "docstring": "\u52a0\u8f7d\u9884\u7f6e\u6a21\u5f0f\u5230\u6570\u636e\u5e93"}], "lines": 697, "x": 56.80454919363552, "y": -633.8496522796621}}, {"id": "5fd75fce11f2", "name": "websocket_service", "type": "file", "path": "src/mcp_core/services/websocket_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b2\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 11971, "complexity": 33, "x": 89.09542685476804, "y": -630.1226886459248, "metadata": {"language": "python", "imports": ["asyncio", "json", "typing", "datetime", "aiohttp", "aiohttp", "common.logger", "redis_client"], "classes": [{"name": "Channels", "methods": ["all"], "docstring": "WebSocket\u9891\u9053\u5b9a\u4e49"}, {"name": "WebSocketManager", "methods": ["__init__", "get_stats"], "docstring": "WebSocket\u8fde\u63a5\u7ba1\u7406\u5668"}], "functions": [{"name": "get_websocket_manager", "args": [], "docstring": "\u83b7\u53d6WebSocket\u7ba1\u7406\u5668\u5355\u4f8b"}], "lines": 378, "x": 89.09542685476804, "y": -630.1226886459248}}, {"id": "97fc96cfdab7", "name": "project_graph_generator", "type": "file", "path": "src/mcp_core/services/project_graph_generator.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b6\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 28301, "complexity": 83, "x": 121.15415683283013, "y": -624.7517290900137, "metadata": {"language": "python", "imports": ["os", "ast", "json", "asyncio", "hashlib", "typing", "dataclasses", "datetime", "pathlib", "networkx", "pyvis.network", "re", "importlib.util", "common.logger", "common.config", "models", "services.redis_client", "services.ai_model_manager"], "classes": [{"name": "NodeInfo", "methods": [], "docstring": "\u8282\u70b9\u4fe1\u606f"}, {"name": "EdgeInfo", "methods": [], "docstring": "\u8fb9\u4fe1\u606f"}, {"name": "GraphData", "methods": [], "docstring": "\u56fe\u8c31\u6570\u636e"}, {"name": "ProjectAnalyzer", "methods": ["__init__", "_get_project_files", "_generate_node_id", "_resolve_dependency", "_calculate_language_stats"], "docstring": "\u9879\u76ee\u5206\u6790\u5668"}, {"name": "GraphGenerator", "methods": ["__init__", "_apply_layout", "_to_json", "_to_html", "_to_networkx", "_get_node_color"], "docstring": "\u56fe\u8c31\u751f\u6210\u5668"}, {"name": "ProjectGraphAPI", "methods": ["__init__"], "docstring": "\u9879\u76ee\u56fe\u8c31API"}], "functions": [{"name": "get_graph_api", "args": [], "docstring": "\u83b7\u53d6\u56fe\u8c31API\u5355\u4f8b"}], "lines": 830, "x": 121.15415683283013, "y": -624.7517290900137}}, {"id": "6b53ce7b7918", "name": "performance_optimization_engine", "type": "file", "path": "src/mcp_core/services/performance_optimization_engine.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b12\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 32448, "complexity": 154, "x": 152.89650232854447, "y": -617.7508103969641, "metadata": {"language": "python", "imports": ["os", "sys", "time", "asyncio", "psutil", "cProfile", "pstats", "io", "gc", "tracemalloc", "typing", "dataclasses", "enum", "datetime", "collections", "json", "numpy", "functools", "aioredis", "aiomysql", "concurrent.futures", "common.logger", "common.config", "models", "services.redis_client", "services.ai_model_manager", "hashlib", "re", "re"], "classes": [{"name": "OptimizationType", "methods": [], "docstring": "\u4f18\u5316\u7c7b\u578b"}, {"name": "PerformanceLevel", "methods": [], "docstring": "\u6027\u80fd\u7ea7\u522b"}, {"name": "PerformanceConfig", "methods": [], "docstring": "\u6027\u80fd\u914d\u7f6e"}, {"name": "PerformanceMetric", "methods": [], "docstring": "\u6027\u80fd\u6307\u6807"}, {"name": "OptimizationSuggestion", "methods": [], "docstring": "\u4f18\u5316\u5efa\u8bae"}, {"name": "PerformanceProfiler", "methods": ["__init__", "profile_function", "_save_profile", "_record_metric", "get_profile", "get_metrics", "get_statistics"], "docstring": "\u6027\u80fd\u5206\u6790\u5668"}, {"name": "QueryOptimizer", "methods": ["__init__", "suggest_indexes"], "docstring": "\u67e5\u8be2\u4f18\u5316\u5668"}, {"name": "CacheOptimizer", "methods": ["__init__", "cached", "_generate_cache_key", "_evict_lru", "get_cache_statistics"], "docstring": "\u7f13\u5b58\u4f18\u5316\u5668"}, {"name": "MemoryOptimizer", "methods": ["__init__", "analyze_memory", "optimize_memory", "force_gc"], "docstring": "\u5185\u5b58\u4f18\u5316\u5668"}, {"name": "AlgorithmOptimizer", "methods": ["__init__", "optimize_algorithm"], "docstring": "\u7b97\u6cd5\u4f18\u5316\u5668"}, {"name": "ConcurrencyOptimizer", "methods": ["__init__", "optimize_concurrency"], "docstring": "\u5e76\u53d1\u4f18\u5316\u5668"}, {"name": "PerformanceOptimizationEngine", "methods": ["__init__", "_get_performance_level", "get_optimization_report"], "docstring": "\u6027\u80fd\u4f18\u5316\u5f15\u64ce"}], "functions": [{"name": "get_performance_engine", "args": [], "docstring": "\u83b7\u53d6\u6027\u80fd\u4f18\u5316\u5f15\u64ce\u5355\u4f8b"}], "lines": 929, "x": 152.89650232854447, "y": -617.7508103969641}}, {"id": "86b9ffc687e0", "name": "ai_model_manager", "type": "file", "path": "src/mcp_core/services/ai_model_manager.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b10\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 22932, "complexity": 123, "x": 184.23994814242081, "y": -609.1382586632741, "metadata": {"language": "python", "imports": ["os", "json", "asyncio", "typing", "dataclasses", "enum", "abc", "aiohttp", "openai", "anthropic", "transformers", "torch", "numpy", "common.logger", "common.config", "time", "time", "time"], "classes": [{"name": "ModelProvider", "methods": [], "docstring": "\u6a21\u578b\u63d0\u4f9b\u5546"}, {"name": "ModelCapability", "methods": [], "docstring": "\u6a21\u578b\u80fd\u529b"}, {"name": "ModelConfig", "methods": [], "docstring": "\u6a21\u578b\u914d\u7f6e"}, {"name": "ModelRequest", "methods": [], "docstring": "\u6a21\u578b\u8bf7\u6c42"}, {"name": "ModelResponse", "methods": [], "docstring": "\u6a21\u578b\u54cd\u5e94"}, {"name": "BaseModelInterface", "methods": ["__init__"], "docstring": "\u57fa\u7840\u6a21\u578b\u63a5\u53e3"}, {"name": "OpenAIInterface", "methods": ["__init__"], "docstring": "OpenAI\u6a21\u578b\u63a5\u53e3"}, {"name": "AnthropicInterface", "methods": ["__init__"], "docstring": "Anthropic\u6a21\u578b\u63a5\u53e3"}, {"name": "HuggingFaceInterface", "methods": ["__init__", "_load_model"], "docstring": "HuggingFace\u6a21\u578b\u63a5\u53e3"}, {"name": "AIModelManager", "methods": ["__init__", "_load_default_models", "register_model", "select_model_for_capability", "_update_statistics", "get_statistics"], "docstring": "AI\u6a21\u578b\u7ba1\u7406\u5668"}], "functions": [{"name": "get_model_manager", "args": [], "docstring": "\u83b7\u53d6\u6a21\u578b\u7ba1\u7406\u5668\u5355\u4f8b"}], "lines": 709, "x": 184.23994814242081, "y": -609.1382586632741}}, {"id": "b72d38f78e8e", "name": "__init__", "type": "file", "path": "src/mcp_core/services/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 754, "complexity": 6, "x": 215.10301190143636, "y": -598.9363421992168, "metadata": {"language": "python", "imports": ["embedding_service", "hallucination_service", "memory_service", "redis_client", "token_service", "vector_db"], "classes": [], "functions": [], "lines": 25, "x": 215.10301190143636, "y": -598.9363421992168}}, {"id": "8a33e4ddfdb2", "name": "embedding_service", "type": "file", "path": "src/mcp_core/services/embedding_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 12928, "complexity": 28, "x": 245.4045967041307, "y": -587.1719575473455, "metadata": {"language": "python", "imports": ["os", "functools", "pathlib", "typing", "numpy", "torch", "sentence_transformers", "common.config", "common.logger", "sklearn.metrics.pairwise", "sklearn.metrics.pairwise", "sklearn.metrics.pairwise", "sklearn.metrics.pairwise"], "classes": [{"name": "EmbeddingService", "methods": ["__init__", "_resolve_model_path", "_validate_model_directory", "_setup_environment", "encode_single", "encode_batch", "encode_cached", "calculate_similarity", "calculate_similarity_matrix", "find_most_similar", "get_dimension", "get_model_info", "clear_cache"], "docstring": "\u5d4c\u5165\u5411\u91cf\u751f\u6210\u670d\u52a1"}], "functions": [{"name": "get_embedding_service", "args": [], "docstring": "\u83b7\u53d6\u5d4c\u5165\u670d\u52a1\u5355\u4f8b\n\nReturns:\n    EmbeddingService\u5b9e\u4f8b"}], "lines": 423, "x": 245.4045967041307, "y": -587.1719575473455}}, {"id": "9b55674d7e81", "name": "websocket_server", "type": "file", "path": "src/mcp_core/services/websocket_server.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 20109, "complexity": 53, "x": 275.0661966816397, "y": -573.8755291944079, "metadata": {"language": "python", "imports": ["json", "asyncio", "logging", "typing", "datetime", "dataclasses", "enum", "websockets", "websockets.server", "websockets.exceptions", "redis.asyncio", "common.logger", "uuid"], "classes": [{"name": "MessageType", "methods": [], "docstring": "\u6d88\u606f\u7c7b\u578b"}, {"name": "WebSocketMessage", "methods": ["__post_init__", "to_json"], "docstring": "WebSocket\u6d88\u606f"}, {"name": "Client", "methods": ["__post_init__"], "docstring": "WebSocket\u5ba2\u6237\u7aef"}, {"name": "WebSocketServer", "methods": ["__init__", "generate_client_id", "get_stats"], "docstring": "WebSocket\u670d\u52a1\u5668"}], "functions": [], "lines": 649, "x": 275.0661966816397, "y": -573.8755291944079}}, {"id": "cac91ec2d55a", "name": "hallucination_service", "type": "file", "path": "src/mcp_core/services/hallucination_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 11733, "complexity": 23, "x": 304.00990095604476, "y": -559.0820319811064, "metadata": {"language": "python", "imports": ["re", "time", "typing", "numpy", "common.config", "common.logger", "embedding_service", "memory_service"], "classes": [{"name": "HallucinationValidationService", "methods": ["__init__", "detect_hallucination", "batch_detect", "_calculate_adaptive_threshold", "_is_complex_task", "_retrieve_relevant_memories", "_build_no_memory_result", "_get_hallucination_reason", "get_hallucination_stats"], "docstring": "\u5e7b\u89c9\u9a8c\u8bc1\u670d\u52a1"}], "functions": [{"name": "create_hallucination_service", "args": ["memory_service"], "docstring": "\u521b\u5efa\u5e7b\u89c9\u9a8c\u8bc1\u670d\u52a1\n\nArgs:\n    memory_service: \u8bb0\u5fc6\u670d\u52a1\u5b9e\u4f8b\n\nReturns:\n    HallucinationValidationService\u5b9e\u4f8b"}], "lines": 379, "x": 304.00990095604476, "y": -559.0820319811064}}, {"id": "de0f9fc39618", "name": "intelligent_code_generator", "type": "file", "path": "src/mcp_core/services/intelligent_code_generator.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b9\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 33361, "complexity": 112, "x": 332.16044892694663, "y": -542.8299314799651, "metadata": {"language": "python", "imports": ["os", "re", "ast", "json", "asyncio", "typing", "dataclasses", "enum", "datetime", "hashlib", "common.logger", "common.config", "ai_model_manager", "pattern_recognizer", "experience_manager", "models", "services.redis_client"], "classes": [{"name": "GenerationType", "methods": [], "docstring": "\u4ee3\u7801\u751f\u6210\u7c7b\u578b"}, {"name": "CodeStyle", "methods": [], "docstring": "\u4ee3\u7801\u98ce\u683c"}, {"name": "GenerationContext", "methods": [], "docstring": "\u4ee3\u7801\u751f\u6210\u4e0a\u4e0b\u6587"}, {"name": "GenerationRequest", "methods": [], "docstring": "\u4ee3\u7801\u751f\u6210\u8bf7\u6c42"}, {"name": "GenerationResult", "methods": [], "docstring": "\u4ee3\u7801\u751f\u6210\u7ed3\u679c"}, {"name": "CodeAnalyzer", "methods": ["analyze_code", "_analyze_python", "_analyze_javascript", "_analyze_java", "_analyze_generic", "_calculate_complexity"], "docstring": "\u4ee3\u7801\u5206\u6790\u5668"}, {"name": "CodeOptimizer", "methods": ["__init__", "_get_python_rules", "_get_javascript_rules", "_get_java_rules"], "docstring": "\u4ee3\u7801\u4f18\u5316\u5668"}, {"name": "IntelligentCodeGenerator", "methods": ["__init__", "_load_templates", "_build_generation_prompt", "_select_capability", "_extract_code", "_calculate_quality_score", "_get_cache_key"], "docstring": "\u667a\u80fd\u4ee3\u7801\u751f\u6210\u5668"}, {"name": "TemplateManager", "methods": ["__init__", "_load_default_templates", "get_template", "render_template"], "docstring": "\u6a21\u677f\u7ba1\u7406\u5668"}], "functions": [{"name": "get_code_generator", "args": [], "docstring": "\u83b7\u53d6\u4ee3\u7801\u751f\u6210\u5668\u5355\u4f8b"}], "lines": 1016, "x": 332.16044892694663, "y": -542.8299314799651}}, {"id": "62542329ebc3", "name": "evolution_api", "type": "file", "path": "src/mcp_core/services/evolution_api.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b6\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 23137, "complexity": 72, "x": 359.4446850316571, "y": -525.1614110753723, "metadata": {"language": "python", "imports": ["fastapi", "fastapi.responses", "pydantic", "typing", "datetime", "asyncio", "services.learning_system", "services.graph_generator", "services.collaboration_controller", "common.logger", "json", "json"], "classes": [{"name": "LearnFromSessionRequest", "methods": [], "docstring": "\u5b66\u4e60\u8bf7\u6c42"}, {"name": "GetSuggestionsRequest", "methods": [], "docstring": "\u83b7\u53d6\u5efa\u8bae\u8bf7\u6c42"}, {"name": "GenerateGraphRequest", "methods": [], "docstring": "\u751f\u6210\u56fe\u8c31\u8bf7\u6c42"}, {"name": "AssignTaskRequest", "methods": [], "docstring": "\u5206\u914d\u4efb\u52a1\u8bf7\u6c42"}, {"name": "AcquireLockRequest", "methods": [], "docstring": "\u83b7\u53d6\u9501\u8bf7\u6c42"}, {"name": "CheckConflictsRequest", "methods": [], "docstring": "\u68c0\u67e5\u51b2\u7a81\u8bf7\u6c42"}], "functions": [], "lines": 720, "x": 359.4446850316571, "y": -525.1614110753723}}, {"id": "0c04083fa880", "name": "multi_level_cache", "type": "file", "path": "src/mcp_core/services/multi_level_cache.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b2\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 8399, "complexity": 26, "x": 385.79090077776993, "y": -506.1229759838793, "metadata": {"language": "python", "imports": ["collections", "typing", "time", "threading", "common.logger", "json"], "classes": [{"name": "LRUCache", "methods": ["__init__", "get", "set", "delete", "clear", "get_stats"], "docstring": "\u7ebf\u7a0b\u5b89\u5168\u7684LRU\u7f13\u5b58"}, {"name": "MultiLevelCache", "methods": ["__init__", "get", "set", "delete", "invalidate_pattern", "get_stats", "warmup"], "docstring": "\u591a\u5c42\u7f13\u5b58\u7ba1\u7406\u5668\nL1 (\u5185\u5b58) \u2192 L2 (Redis) \u2192 L3 (\u6570\u636e\u5e93)"}], "functions": [], "lines": 286, "x": 385.79090077776993, "y": -506.1229759838793}}, {"id": "8eb9b3aab184", "name": "redis_client", "type": "file", "path": "src/mcp_core/services/redis_client.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 12895, "complexity": 26, "x": 411.130852100569, "y": -485.76394168789795, "metadata": {"language": "python", "imports": ["json", "typing", "redis", "redis.connection", "common.config", "common.logger", "common.utils", "multi_level_cache", "re", "datetime", "datetime"], "classes": [{"name": "RedisClient", "methods": ["__init__", "_mask_url", "_redis_get_raw", "store_short_memory", "get_short_memories", "delete_short_memory", "cache_get", "cache_set", "cache_delete", "cache_retrieval_result", "get_cached_retrieval", "invalidate_cache", "increment_token_saved", "get_token_stats", "exists", "delete", "ttl", "close", "__enter__", "__exit__"], "docstring": "Redis\u5ba2\u6237\u7aef\u5c01\u88c5\u7c7b"}], "functions": [{"name": "get_redis_client", "args": [], "docstring": "\u83b7\u53d6Redis\u5ba2\u6237\u7aef\u5355\u4f8b\n\nReturns:\n    RedisClient\u5b9e\u4f8b"}], "lines": 441, "x": 411.130852100569, "y": -485.76394168789795}}, {"id": "31dea14d1cfb", "name": "vector_db", "type": "file", "path": "src/mcp_core/services/vector_db.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 18321, "complexity": 24, "x": 435.3979310585229, "y": -464.13775346343175, "metadata": {"language": "python", "imports": ["time", "asyncio", "threading", "datetime", "typing", "pymilvus", "common.config", "common.logger", "websocket_service"], "classes": [{"name": "VectorDBClient", "methods": ["__init__", "_init_collections", "create_collection", "insert_vectors", "_convert_to_entities", "search_vectors", "_notify_search_completed", "delete_vectors", "query_vectors", "get_collection_stats", "drop_collection", "close"], "docstring": "Milvus\u5411\u91cf\u6570\u636e\u5e93\u5ba2\u6237\u7aef"}], "functions": [{"name": "get_vector_db_client", "args": [], "docstring": "\u83b7\u53d6\u5411\u91cf\u6570\u636e\u5e93\u5ba2\u6237\u7aef\u5355\u4f8b\n\nReturns:\n    VectorDBClient\u5b9e\u4f8b"}], "lines": 561, "x": 435.3979310585229, "y": -464.13775346343175}}, {"id": "842fdb461e01", "name": "error_firewall_service", "type": "file", "path": "src/mcp_core/services/error_firewall_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 22209, "complexity": 26, "x": 458.52912980643066, "y": -441.30062999789607, "metadata": {"language": "python", "imports": ["hashlib", "json", "asyncio", "threading", "datetime", "typing", "sqlalchemy", "sqlalchemy.orm", "common.logger", "websocket_service", "websocket_service"], "classes": [{"name": "ErrorFirewallService", "methods": ["__init__", "record_error", "get_error_by_id", "_update_error_occurrence", "check_operation", "_find_matching_errors", "_calculate_match_confidence", "_log_intercept", "_update_blocked_count", "get_statistics", "get_recent_errors", "_generate_error_id", "_notify_error_recorded", "_notify_error_intercepted"], "docstring": "\u9519\u8bef\u9632\u706b\u5899\u6838\u5fc3\u670d\u52a1"}], "functions": [{"name": "get_error_firewall_service", "args": ["db_session"], "docstring": "\u83b7\u53d6\u9519\u8bef\u9632\u706b\u5899\u670d\u52a1\u5355\u4f8b\n\nArgs:\n    db_session: \u6570\u636e\u5e93\u4f1a\u8bdd\n\nReturns:\n    ErrorFirewallService\u5b9e\u4f8b"}], "lines": 650, "x": 458.52912980643066, "y": -441.30062999789607}}, {"id": "32f0c4788768", "name": "dynamic_db_pool", "type": "file", "path": "src/mcp_core/services/dynamic_db_pool.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b2\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 16836, "complexity": 38, "x": 480.46424848465483, "y": -417.312013618032, "metadata": {"language": "python", "imports": ["time", "threading", "asyncio", "typing", "dataclasses", "datetime", "sqlalchemy", "sqlalchemy.engine", "sqlalchemy.pool", "common.logger", "common.config", "websocket_service", "websocket_service"], "classes": [{"name": "PoolMetrics", "methods": [], "docstring": "\u8fde\u63a5\u6c60\u6307\u6807"}, {"name": "DynamicConnectionPoolManager", "methods": ["__init__", "_create_engine", "_register_event_listeners", "start_monitoring", "stop", "_monitoring_loop", "_update_metrics", "_broadcast_pool_stats", "_should_adjust", "_adjust_pool_size", "_notify_pool_adjustment", "_resize_pool", "_check_alerts", "get_stats"], "docstring": "\u52a8\u6001\u8fde\u63a5\u6c60\u7ba1\u7406\u5668"}], "functions": [{"name": "get_dynamic_pool_manager", "args": [], "docstring": "\u83b7\u53d6\u52a8\u6001\u8fde\u63a5\u6c60\u7ba1\u7406\u5668\u5355\u4f8b"}], "lines": 471, "x": 480.46424848465483, "y": -417.312013618032}}, {"id": "b6dff9b35a07", "name": "experience_manager", "type": "file", "path": "src/mcp_core/services/experience_manager.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 38459, "complexity": 62, "x": 501.14563067462825, "y": -392.23487001903453, "metadata": {"language": "python", "imports": ["json", "pickle", "hashlib", "typing", "dataclasses", "datetime", "collections", "numpy", "sqlalchemy", "sqlalchemy.orm", "redis", "common.config", "common.logger", "services.embedding_service", "services.redis_client", "copy", "re"], "classes": [{"name": "Experience", "methods": [], "docstring": "\u7ecf\u9a8c\u5b9e\u4f53"}, {"name": "ExperienceCluster", "methods": [], "docstring": "\u7ecf\u9a8c\u805a\u7c7b"}, {"name": "ExperienceRecommendation", "methods": [], "docstring": "\u7ecf\u9a8c\u63a8\u8350"}, {"name": "ExperienceManagementSystem", "methods": ["__init__", "store_experience", "retrieve_experience", "evolve_experience", "share_experience", "multi_path_retrieval", "vector_search", "keyword_search", "tag_search", "category_search", "rerank_experiences", "generate_recommendation", "merge_experiences", "should_evolve", "create_evolved_version", "generate_experience_id", "calculate_experience_embedding", "find_similar_experiences", "evaluate_experience", "save_to_database", "update_caches", "update_indexes", "update_clusters_async", "get_experience", "update_experience", "record_retrieval", "update_statistics", "analyze_feedback", "apply_improvements", "adjust_scores", "clone_experience", "adapt_to_project", "create_sharing_link", "extract_keywords", "calculate_similarity", "calculate_keyword_score", "apply_filters", "merge_results", "calculate_context_match", "calculate_time_decay", "analyze_expected_benefit", "assess_risks", "generate_reasoning", "calculate_confidence", "combine_solutions", "apply_improvements_to_solution"], "docstring": "\u667a\u80fd\u7ecf\u9a8c\u7ba1\u7406\u7cfb\u7edf"}], "functions": [{"name": "get_experience_manager", "args": [], "docstring": "\u83b7\u53d6\u7ecf\u9a8c\u7ba1\u7406\u7cfb\u7edf\u5355\u4f8b"}], "lines": 1225, "x": 501.14563067462825, "y": -392.23487001903453}}, {"id": "e322ce0903eb", "name": "learning_system", "type": "file", "path": "src/mcp_core/services/learning_system.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b5\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 34970, "complexity": 71, "x": 520.5197896723087, "y": -366.13418192161015, "metadata": {"language": "python", "imports": ["os", "json", "hashlib", "datetime", "typing", "dataclasses", "numpy", "sqlalchemy", "sqlalchemy.orm", "models.base", "common.config", "common.logger", "services.embedding_service", "services.redis_client", "re", "re"], "classes": [{"name": "CodingSession", "methods": [], "docstring": "\u7f16\u7801\u4f1a\u8bdd\u6570\u636e"}, {"name": "CodePattern", "methods": [], "docstring": "\u4ee3\u7801\u6a21\u5f0f"}, {"name": "LearningExperience", "methods": [], "docstring": "\u5b66\u4e60\u7ecf\u9a8c"}, {"name": "SolutionRecommendation", "methods": [], "docstring": "\u89e3\u51b3\u65b9\u6848\u63a8\u8350"}, {"name": "CodingLearningSystem", "methods": ["__init__", "learn_from_session", "extract_patterns", "identify_best_practices", "record_error_fixes", "suggest_solution", "find_similar_experiences", "adapt_solution", "update_pattern_library", "generate_solution_templates", "evaluate_experience_value", "calculate_quality_score", "calculate_complexity_score", "calculate_reusability_score", "calculate_learning_value", "analyze_code_diff", "identify_structural_patterns", "create_pattern", "store_experience", "generate_id", "cache_template", "generate_learning_summary", "analyze_context", "extract_keywords", "extract_file_types", "estimate_complexity", "calculate_confidence", "compare_contexts", "generate_recommendation_reasoning", "identify_refactor_patterns", "identify_optimization_patterns", "identify_fix_patterns", "evaluate_pattern_quality", "analyze_pattern_benefits", "classify_error_type", "extract_error_pattern", "extract_fix_pattern", "generate_prevention_tips", "generate_template_code", "extract_template_variables", "generate_usage_guide"], "docstring": "\u7f16\u7801\u5b66\u4e60\u7cfb\u7edf - \u8d8a\u7528\u8d8a\u806a\u660e"}], "functions": [{"name": "get_learning_system", "args": [], "docstring": "\u83b7\u53d6\u5b66\u4e60\u7cfb\u7edf\u5355\u4f8b"}], "lines": 990, "x": 520.5197896723087, "y": -366.13418192161015}}, {"id": "3f1fdf4bacf9", "name": "token_service", "type": "file", "path": "src/mcp_core/services/token_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 10312, "complexity": 26, "x": 538.5357453114448, "y": -339.07852834187827, "metadata": {"language": "python", "imports": ["hashlib", "time", "typing", "common.config", "common.logger", "compressors.code_compressor", "compressors.text_compressor", "redis_client", "re", "json", "json"], "classes": [{"name": "TokenOptimizationService", "methods": ["__init__", "compress_content", "batch_compress", "calculate_token_savings", "_count_tokens", "_detect_content_type", "_hash_content", "_get_cached_compression", "_cache_compression", "get_compression_stats"], "docstring": "Token\u4f18\u5316\u670d\u52a1"}], "functions": [{"name": "get_token_service", "args": [], "docstring": "\u83b7\u53d6Token\u670d\u52a1\u5355\u4f8b\n\nReturns:\n    TokenOptimizationService\u5b9e\u4f8b"}], "lines": 350, "x": 538.5357453114448, "y": -339.07852834187827}}, {"id": "0bbf9fd3e51e", "name": "graph_generator", "type": "file", "path": "src/mcp_core/services/graph_generator.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 38273, "complexity": 67, "x": 555.1468766600103, "y": -311.1379934603549, "metadata": {"language": "python", "imports": ["os", "json", "hashlib", "ast", "networkx", "pathlib", "datetime", "typing", "dataclasses", "numpy", "sqlalchemy", "sqlalchemy.orm", "models.base", "common.config", "common.logger", "code_analyzer", "java_analyzer", "multi_lang_analyzer", "services.embedding_service", "services.redis_client", "re", "community"], "classes": [{"name": "GraphNode", "methods": [], "docstring": "\u56fe\u8c31\u8282\u70b9"}, {"name": "GraphEdge", "methods": [], "docstring": "\u56fe\u8c31\u8fb9"}, {"name": "ProjectGraph", "methods": [], "docstring": "\u9879\u76ee\u77e5\u8bc6\u56fe\u8c31"}, {"name": "ProjectGraphGenerator", "methods": ["__init__", "generate_graph", "analyze_codebase", "build_nodes", "build_edges", "enhance_with_semantics", "calculate_importance_metrics", "identify_architectural_patterns", "perform_clustering", "extract_layers", "calculate_layout", "generate_visualization", "generate_heatmap", "create_navigation_tree", "store_graph", "generate_project_id", "generate_edge_id", "get_node_color", "get_node_size", "get_edge_style", "get_edge_color", "calculate_edge_weight", "find_entity_by_name", "extract_keywords", "calculate_code_complexity", "detect_mvc_pattern", "detect_layered_architecture", "detect_microservices", "detect_design_patterns", "generate_cluster_name", "get_dominant_type", "calculate_cluster_cohesion", "get_layer_name", "generate_statistics"], "docstring": "\u9879\u76ee\u56fe\u8c31\u751f\u6210\u5668 - \u8ba9\u4eba\u548cAI\u90fd\u61c2\u9879\u76ee"}], "functions": [{"name": "get_graph_generator", "args": [], "docstring": "\u83b7\u53d6\u56fe\u8c31\u751f\u6210\u5668\u5355\u4f8b"}], "lines": 1103, "x": 555.1468766600103, "y": -311.1379934603549}}, {"id": "8b690d0124ea", "name": "intelligent_operations_system", "type": "file", "path": "src/mcp_core/services/intelligent_operations_system.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b12\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 33673, "complexity": 154, "x": 570.3094864221565, "y": -282.3859925661914, "metadata": {"language": "python", "imports": ["os", "sys", "time", "asyncio", "psutil", "docker", "kubernetes", "subprocess", "typing", "dataclasses", "enum", "datetime", "collections", "json", "yaml", "smtplib", "requests", "email.mime.text", "email.mime.multipart", "prometheus_client", "prometheus_client", "logging", "logging.handlers", "common.logger", "common.config", "models", "services.redis_client", "services.ai_model_manager", "gc"], "classes": [{"name": "ServiceStatus", "methods": [], "docstring": "\u670d\u52a1\u72b6\u6001"}, {"name": "IncidentSeverity", "methods": [], "docstring": "\u4e8b\u4ef6\u4e25\u91cd\u6027"}, {"name": "MaintenanceType", "methods": [], "docstring": "\u7ef4\u62a4\u7c7b\u578b"}, {"name": "OperationsConfig", "methods": [], "docstring": "\u8fd0\u7ef4\u914d\u7f6e"}, {"name": "HealthCheck", "methods": [], "docstring": "\u5065\u5eb7\u68c0\u67e5"}, {"name": "Alert", "methods": [], "docstring": "\u544a\u8b66"}, {"name": "MonitoringManager", "methods": ["__init__", "_get_network_metrics", "_get_process_metrics", "register_health_check", "get_service_status"], "docstring": "\u76d1\u63a7\u7ba1\u7406\u5668"}, {"name": "AlertManager", "methods": ["__init__"], "docstring": "\u544a\u8b66\u7ba1\u7406\u5668"}, {"name": "LogManager", "methods": ["__init__", "_setup_loggers"], "docstring": "\u65e5\u5fd7\u7ba1\u7406\u5668"}, {"name": "BackupManager", "methods": ["__init__", "_get_dir_size"], "docstring": "\u5907\u4efd\u7ba1\u7406\u5668"}, {"name": "ContainerManager", "methods": ["__init__"], "docstring": "\u5bb9\u5668\u7ba1\u7406\u5668"}, {"name": "IntelligentOperationsSystem", "methods": ["__init__", "_register_default_health_checks"], "docstring": "\u667a\u80fd\u8fd0\u7ef4\u7cfb\u7edf"}], "functions": [{"name": "get_operations_system", "args": [], "docstring": "\u83b7\u53d6\u8fd0\u7ef4\u7cfb\u7edf\u5355\u4f8b"}], "lines": 992, "x": 570.3094864221565, "y": -282.3859925661914}}, {"id": "ca2f15b7acbb", "name": "memory_service", "type": "file", "path": "src/mcp_core/services/memory_service.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 19959, "complexity": 23, "x": 583.9842379102363, "y": -252.89727394071505, "metadata": {"language": "python", "imports": ["re", "time", "datetime", "typing", "sqlalchemy.orm", "common.config", "common.logger", "common.utils", "models.tables", "embedding_service", "redis_client", "vector_db", "jieba"], "classes": [{"name": "MemoryService", "methods": ["__init__", "store_memory", "_store_short_memory", "_store_mid_memory", "_store_long_memory", "retrieve_memory", "_retrieve_short_memories", "_retrieve_mid_memories", "_retrieve_long_memories", "update_memory", "delete_memory", "_extract_core_info", "_calculate_relevance_score", "_deduplicate_memories", "_extract_keywords"], "docstring": "\u8bb0\u5fc6\u7ba1\u7406\u670d\u52a1"}], "functions": [], "lines": 607, "x": 583.9842379102363, "y": -252.89727394071505}}, {"id": "fcb11bd78ed2", "name": "enterprise_security_system", "type": "file", "path": "src/mcp_core/services/enterprise_security_system.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b17\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 32843, "complexity": 201, "x": 596.1355494402553, "y": -222.74848187830085, "metadata": {"language": "python", "imports": ["os", "jwt", "bcrypt", "secrets", "hashlib", "asyncio", "re", "typing", "dataclasses", "enum", "datetime", "json", "base64", "cryptography.fernet", "cryptography.hazmat.primitives", "cryptography.hazmat.primitives.kdf.pbkdf2", "cryptography.hazmat.primitives.ciphers", "cryptography.hazmat.backends", "pyotp", "aiohttp", "sqlalchemy", "common.logger", "common.config", "models", "services.redis_client", "string"], "classes": [{"name": "SecurityLevel", "methods": [], "docstring": "\u5b89\u5168\u7ea7\u522b"}, {"name": "AuthMethod", "methods": [], "docstring": "\u8ba4\u8bc1\u65b9\u6cd5"}, {"name": "Permission", "methods": [], "docstring": "\u6743\u9650\u7c7b\u578b"}, {"name": "SecurityConfig", "methods": [], "docstring": "\u5b89\u5168\u914d\u7f6e"}, {"name": "User", "methods": [], "docstring": "\u7528\u6237\u6a21\u578b"}, {"name": "Session", "methods": [], "docstring": "\u4f1a\u8bdd\u6a21\u578b"}, {"name": "AuditLog", "methods": [], "docstring": "\u5ba1\u8ba1\u65e5\u5fd7\u6a21\u578b"}, {"name": "SecurityIncident", "methods": [], "docstring": "\u5b89\u5168\u4e8b\u4ef6\u6a21\u578b"}, {"name": "PasswordManager", "methods": ["__init__", "hash_password", "verify_password", "validate_password_strength", "generate_secure_password"], "docstring": "\u5bc6\u7801\u7ba1\u7406\u5668"}, {"name": "TokenManager", "methods": ["__init__", "generate_token", "verify_token", "generate_refresh_token", "generate_api_key"], "docstring": "\u4ee4\u724c\u7ba1\u7406\u5668"}, {"name": "MFAManager", "methods": ["generate_secret", "generate_qr_code", "verify_totp", "generate_backup_codes"], "docstring": "\u591a\u56e0\u7d20\u8ba4\u8bc1\u7ba1\u7406\u5668"}, {"name": "EncryptionManager", "methods": ["__init__", "encrypt", "decrypt", "encrypt_file", "decrypt_file", "hash_data", "generate_encryption_key"], "docstring": "\u52a0\u5bc6\u7ba1\u7406\u5668"}, {"name": "AccessControlManager", "methods": ["__init__", "check_permission", "get_user_permissions", "grant_permission", "revoke_permission"], "docstring": "\u8bbf\u95ee\u63a7\u5236\u7ba1\u7406\u5668"}, {"name": "AuditManager", "methods": ["__init__", "get_audit_logs"], "docstring": "\u5ba1\u8ba1\u7ba1\u7406\u5668"}, {"name": "ThreatDetector", "methods": ["__init__", "_get_threat_severity"], "docstring": "\u5a01\u80c1\u68c0\u6d4b\u5668"}, {"name": "DataProtectionManager", "methods": ["__init__", "mask_sensitive_data", "encrypt_field", "decrypt_field", "generate_data_retention_policy"], "docstring": "\u6570\u636e\u4fdd\u62a4\u7ba1\u7406\u5668"}, {"name": "EnterpriseSecurityManager", "methods": ["__init__", "get_security_headers"], "docstring": "\u4f01\u4e1a\u5b89\u5168\u7ba1\u7406\u5668"}], "functions": [{"name": "get_security_manager", "args": [], "docstring": "\u83b7\u53d6\u5b89\u5168\u7ba1\u7406\u5668\u5355\u4f8b"}], "lines": 952, "x": 596.1355494402553, "y": -222.74848187830085}}, {"id": "55df9a71b812", "name": "pattern_recognizer", "type": "file", "path": "src/mcp_core/services/pattern_recognizer.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 36854, "complexity": 58, "x": 606.7314445732635, "y": -192.01885374868613, "metadata": {"language": "python", "imports": ["re", "ast", "json", "hashlib", "typing", "dataclasses", "datetime", "collections", "numpy", "sklearn.cluster", "sklearn.feature_extraction.text", "common.logger", "services.embedding_service"], "classes": [{"name": "PatternFeature", "methods": [], "docstring": "\u6a21\u5f0f\u7279\u5f81"}, {"name": "CodePattern", "methods": [], "docstring": "\u589e\u5f3a\u7248\u4ee3\u7801\u6a21\u5f0f"}, {"name": "PatternCluster", "methods": [], "docstring": "\u6a21\u5f0f\u805a\u7c7b"}, {"name": "AdvancedPatternRecognizer", "methods": ["__init__", "recognize_patterns", "preprocess_code", "extract_all_features", "extract_structural_features", "extract_semantic_features", "extract_behavioral_features", "extract_quality_features", "quick_pattern_match", "deep_pattern_analysis", "recognize_composite_patterns", "detect_anti_patterns", "classify_design_pattern", "classify_anti_pattern", "classify_code_smell", "classify_optimization_pattern", "detect_pattern_evolution", "discover_new_patterns", "evolve_pattern", "create_pattern", "generate_pattern_id", "normalize_code", "tokenize_code", "calculate_complexity", "detect_duplicates", "features_to_vector", "feature_to_vector", "calculate_pattern_similarity", "pattern_to_vector", "matches_evolved_pattern", "matches_known_pattern", "analyze_pattern_changes", "deduplicate_and_rank", "update_pattern_library"], "docstring": "\u9ad8\u7ea7\u6a21\u5f0f\u8bc6\u522b\u5668"}], "functions": [{"name": "get_pattern_recognizer", "args": [], "docstring": "\u83b7\u53d6\u6a21\u5f0f\u8bc6\u522b\u5668\u5355\u4f8b"}], "lines": 1083, "x": 606.7314445732635, "y": -192.01885374868613}}, {"id": "addc0f484c9b", "name": "collaboration_controller", "type": "file", "path": "src/mcp_core/services/collaboration_controller.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b11\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 45251, "complexity": 132, "x": 615.7444967151611, "y": -160.78795638618985, "metadata": {"language": "python", "imports": ["os", "json", "hashlib", "asyncio", "threading", "datetime", "typing", "dataclasses", "enum", "numpy", "sqlalchemy", "sqlalchemy.orm", "models.base", "common.config", "common.logger", "services.redis_client", "re"], "classes": [{"name": "LockType", "methods": [], "docstring": "\u9501\u7c7b\u578b"}, {"name": "LockLevel", "methods": [], "docstring": "\u9501\u7ea7\u522b"}, {"name": "LockStatus", "methods": [], "docstring": "\u9501\u72b6\u6001"}, {"name": "TaskStatus", "methods": [], "docstring": "\u4efb\u52a1\u72b6\u6001"}, {"name": "ConflictStrategy", "methods": [], "docstring": "\u51b2\u7a81\u7b56\u7565"}, {"name": "AIAgent", "methods": [], "docstring": "AI\u4ee3\u7406"}, {"name": "Task", "methods": [], "docstring": "\u4efb\u52a1"}, {"name": "Lock", "methods": [], "docstring": "\u9501"}, {"name": "Conflict", "methods": [], "docstring": "\u51b2\u7a81"}, {"name": "CollaborationSession", "methods": [], "docstring": "\u534f\u4f5c\u4f1a\u8bdd"}, {"name": "MultiAICollaborationController", "methods": ["__init__", "assign_task", "decompose_task", "decompose_by_functionality", "analyze_dependencies", "identify_parallel_groups", "select_best_agent", "calculate_agent_task_score", "acquire_locks_for_task", "request_lock", "check_lock_conflicts", "are_locks_compatible", "regions_overlap", "handle_lock_conflicts", "release_lock", "release_expired_locks", "prevent_conflicts", "check_file_conflicts", "check_semantic_conflicts", "negotiate_resolution", "auto_merge_changes", "coordinate_agents", "generate_lock_id", "generate_conflict_id", "create_waiting_lock", "create_acquired_lock", "store_lock", "update_lock_status", "store_assignments", "notify_waiters", "extract_keywords", "extract_functionalities", "has_file_dependency", "has_logical_dependency", "topological_sort", "has_resource_conflict", "estimate_start_time", "can_preempt", "preempt_lock", "estimate_wait_time", "estimate_conflict_resolution_time", "create_merge_plan", "negotiate_with_agent", "acquire_locks_for_changes", "analyze_semantic_impact", "get_task_semantics", "calculate_semantic_similarity", "modifications_conflict", "smart_merge_modifications", "get_task_progress", "optimize_task_distribution", "allocate_resources", "create_timeline"], "docstring": "\u591aAI\u534f\u540c\u63a7\u5236\u5668 - \u65e0\u51b2\u7a81\u5e76\u884c\u5f00\u53d1"}], "functions": [{"name": "get_collaboration_controller", "args": [], "docstring": "\u83b7\u53d6\u534f\u540c\u63a7\u5236\u5668\u5355\u4f8b"}], "lines": 1387, "x": 615.7444967151611, "y": -160.78795638618985}}, {"id": "fcf7f3382eac", "name": "text_compressor", "type": "file", "path": "src/mcp_core/services/compressors/text_compressor.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 7591, "complexity": 15, "x": 623.1510755050746, "y": -129.1378909915629, "metadata": {"language": "python", "imports": ["re", "typing", "common.logger", "collections", "summa.summarizer"], "classes": [{"name": "TextCompressor", "methods": ["__init__", "compress", "_compress_with_textrank", "_compress_with_sentence_ranking", "_split_sentences", "_calculate_sentence_score", "_compress_with_truncation", "extract_keywords", "get_compression_info"], "docstring": "\u6587\u672c\u538b\u7f29\u5668"}], "functions": [], "lines": 276, "x": 623.1510755050746, "y": -129.1378909915629}}, {"id": "50e0f5405b7b", "name": "__init__", "type": "file", "path": "src/mcp_core/services/compressors/__init__.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b0\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 159, "complexity": 2, "x": 628.9319098386567, "y": -97.15091512430494, "metadata": {"language": "python", "imports": ["code_compressor", "text_compressor"], "classes": [], "functions": [], "lines": 6, "x": 628.9319098386567, "y": -97.15091512430494}}, {"id": "ea9e067a10ea", "name": "code_compressor", "type": "file", "path": "src/mcp_core/services/compressors/code_compressor.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b1\u4e2a\u7c7b\uff0c0\u4e2a\u51fd\u6570", "size": 8993, "complexity": 14, "x": 633.0719399979026, "y": -64.9101918083869, "metadata": {"language": "python", "imports": ["ast", "re", "typing", "common.logger"], "classes": [{"name": "CodeCompressor", "methods": ["__init__", "compress", "_compress_python", "_extract_class_summary", "_extract_function_summary", "_is_method", "_compress_javascript", "_compress_generic", "_detect_language", "get_compression_info"], "docstring": "\u4ee3\u7801\u538b\u7f29\u5668"}], "functions": [], "lines": 278, "x": 633.0719399979026, "y": -64.9101918083869}}, {"id": "4d070d2e92fb", "name": "graph_generator_tool", "type": "file", "path": "src/mcp_tools/graph_generator_tool.py", "description": "Python\u6a21\u5757\uff0c\u5305\u542b4\u4e2a\u7c7b\uff0c1\u4e2a\u51fd\u6570", "size": 21227, "complexity": 54, "x": 635.5602792451796, "y": -32.500410278614105, "metadata": {"language": "python", "imports": ["os", "json", "asyncio", "typing", "pathlib", "typing", "dataclasses", "src.mcp_core.services.project_graph_generator", "src.mcp_core.common.logger"], "classes": [{"name": "ToolResponse", "methods": [], "docstring": null}, {"name": "Tool", "methods": [], "docstring": null}, {"name": "GraphGeneratorTool", "methods": ["_generate_statistics", "_generate_html_visualization"], "docstring": "\u751f\u6210\u9879\u76ee\u77e5\u8bc6\u56fe\u8c31\u7684MCP\u5de5\u5177\n\n\u4f7f\u7528\u65b9\u6cd5\uff1a\n1. \u5206\u6790\u5f53\u524d\u9879\u76ee\uff1agenerate_project_graph()\n2. \u5206\u6790\u6307\u5b9a\u9879\u76ee\uff1agenerate_project_graph(path=\"/path/to/project\")\n3. \u81ea\u5b9a\u4e49\u9009\u9879\uff1agenerate_project_graph(path=\"/path\", format=\"html\")"}, {"name": "ViewGraphTool", "methods": [], "docstring": "\u67e5\u770b\u5df2\u751f\u6210\u7684\u9879\u76ee\u56fe\u8c31"}], "functions": [{"name": "register_tools", "args": [], "docstring": "\u6ce8\u518c\u56fe\u8c31\u751f\u6210\u5de5\u5177"}], "lines": 642, "x": 635.5602792451796, "y": -32.500410278614105}}], "edges": [{"source": "25baff532b5d", "target": "80cf0939842e", "type": "imports", "weight": 1.0, "metadata": {"dependency": "./services/websocket"}}, {"source": "a8f5bd892a69", "target": "80cf0939842e", "type": "imports", "weight": 1.0, "metadata": {"dependency": "../services/websocket"}}, {"source": "a8f5bd892a69", "target": "e8fed71e8cb4", "type": "imports", "weight": 1.0, "metadata": {"dependency": "../types"}}, {"source": "4b27deef884e", "target": "80cf0939842e", "type": "imports", "weight": 1.0, "metadata": {"dependency": "../services/websocket"}}, {"source": "4b27deef884e", "target": "e8fed71e8cb4", "type": "imports", "weight": 1.0, "metadata": {"dependency": "../types"}}, {"source": "76e3ca749a08", "target": "80cf0939842e", "type": "imports", "weight": 1.0, "metadata": {"dependency": "../services/websocket"}}, {"source": "76e3ca749a08", "target": "e8fed71e8cb4", "type": "imports", "weight": 1.0, "metadata": {"dependency": "../types"}}, {"source": "c594fcd72ae9", "target": "80cf0939842e", "type": "imports", "weight": 1.0, "metadata": {"dependency": "../services/websocket"}}, {"source": "c594fcd72ae9", "target": "e8fed71e8cb4", "type": "imports", "weight": 1.0, "metadata": {"dependency": "../types"}}, {"source": "80cf0939842e", "target": "e8fed71e8cb4", "type": "imports", "weight": 1.0, "metadata": {"dependency": "../types"}}], "metadata": {"project_name": "MCP", "project_path": "/Users/mac/Downloads/MCP", "total_files": 123, "total_dependencies": 10, "analysis_time": "2025-11-20T23:46:37.052695", "language_stats": {"python": 105, "javascript": 13, "typescript": 4, "unknown": 1}}};

        // D3.jsÂèØËßÜÂåñ‰ª£Á†Å
        const width = window.innerWidth - 320;
        const height = window.innerHeight;

        const svg = d3.select("#graph")
            .attr("width", width)
            .attr("height", height);

        const g = svg.append("g");

        const zoom = d3.zoom()
            .scaleExtent([0.1, 10])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
            });

        svg.call(zoom);

        // ÂäõÂØºÂêëÊ®°Êãü
        const simulation = d3.forceSimulation()
            .force("link", d3.forceLink().id(d => d.id).distance(50))
            .force("charge", d3.forceManyBody().strength(-100))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collision", d3.forceCollide().radius(15));

        // ÂàõÂª∫ÈìæÊé•
        const link = g.append("g")
            .selectAll("line")
            .data(graphData.edges)
            .enter().append("line")
            .attr("class", "link")
            .attr("stroke-width", 1);

        // ÂàõÂª∫ËäÇÁÇπ
        const node = g.append("g")
            .selectAll("circle")
            .data(graphData.nodes)
            .enter().append("circle")
            .attr("class", "node")
            .attr("r", d => Math.min(15, 5 + Math.sqrt(d.size / 1000)))
            .attr("fill", d => getNodeColor(d))
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended))
            .on("mouseover", showTooltip)
            .on("mouseout", hideTooltip);

        // Ê∑ªÂä†Ê†áÁ≠æ (ÂàùÂßãÈöêËóèÔºåÊñá‰ª∂Â§™Â§ö)
        const label = g.append("g")
            .selectAll("text")
            .data(graphData.nodes)
            .enter().append("text")
            .attr("class", "node-label")
            .text(d => d.name)
            .style("display", "none");

        let showLabels = false;

        // ÂêØÂä®Ê®°Êãü
        simulation
            .nodes(graphData.nodes)
            .on("tick", ticked);

        simulation.force("link")
            .links(graphData.edges);

        function ticked() {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);

            label
                .attr("x", d => d.x)
                .attr("y", d => d.y - 10);
        }

        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        function getNodeColor(node) {
            const colors = {
                "python": "#3776ab",
                "javascript": "#f7df1e",
                "typescript": "#3178c6",
                "java": "#007396",
                "go": "#00add8",
                "rust": "#dea584",
                "unknown": "#808080"
            };
            const lang = node.metadata?.language || "unknown";
            return colors[lang] || "#808080";
        }

        function showTooltip(event, d) {
            const tooltip = d3.select(".tooltip");
            tooltip.html(`
                <strong>${d.name}</strong><br>
                Ë∑ØÂæÑ: ${d.path}<br>
                Â§ßÂ∞è: ${(d.size / 1024).toFixed(2)} KB<br>
                Â§çÊùÇÂ∫¶: ${d.complexity || 0}
            `)
            .style("left", (event.pageX + 10) + "px")
            .style("top", (event.pageY - 28) + "px")
            .style("opacity", 1);
        }

        function hideTooltip() {
            d3.select(".tooltip").style("opacity", 0);
        }

        function searchNodes(term) {
            const lowerTerm = term.toLowerCase();
            node.style("opacity", d =>
                d.name.toLowerCase().includes(lowerTerm) ? 1 : 0.2
            );
        }

        function resetView() {
            svg.transition().call(zoom.transform, d3.zoomIdentity);
            node.style("opacity", 1);
        }

        function toggleLabels() {
            showLabels = !showLabels;
            label.style("display", showLabels ? "block" : "none");
        }
    </script>
</body>
</html>